
<!doctype html>
<html lang="fr" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://training.nextflow.io/2.0.1/fr/hello_nextflow/08_hello_nf-test/">
      
      
        <link rel="prev" href="../07_hello_modules/">
      
      
        <link rel="next" href="../09_hello_nf-core/">
      
      
      <link rel="icon" href="../../../assets/img/nextflow-icon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.4">
    
    
      
        <title>Part 7: Hello nf-test - training.nextflow.io</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.8608ea7d.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inter:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Inter";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/fonts.css">
    
      <link rel="stylesheet" href="../../../assets/stylesheets/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-244N3GEN75"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-244N3GEN75",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-244N3GEN75",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>if("undefined"!=typeof __md_analytics){var consent=__md_get("__consent");consent&&consent.analytics&&__md_analytics()}</script>
  

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#part-7-hello-nf-test" class="md-skip">
          Aller au contenu
        </a>
      
    </div>
    <div data-md-component="announce">
      
        <aside class="md-banner">
          <div class="md-banner__inner md-grid md-typeset">
            
            
<div style="text-align: center">
  <span>Next community training</span>:
  <strong>March 5-6, 2024</strong> on YouTube, with
  support on Slack
  <span class="twemoji" style="margin-left: 0.5em">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305m-317.51 213.508V175.185l142.739 81.205z"/></svg>
  </span>
  <span class="twemoji" style="margin-right: 0.5em">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M94.12 315.1c0 25.9-21.16 47.06-47.06 47.06S0 341 0 315.1s21.16-47.06 47.06-47.06h47.06zm23.72 0c0-25.9 21.16-47.06 47.06-47.06s47.06 21.16 47.06 47.06v117.84c0 25.9-21.16 47.06-47.06 47.06s-47.06-21.16-47.06-47.06zm47.06-188.98c-25.9 0-47.06-21.16-47.06-47.06S139 32 164.9 32s47.06 21.16 47.06 47.06v47.06zm0 23.72c25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06H47.06C21.16 243.96 0 222.8 0 196.9s21.16-47.06 47.06-47.06zm188.98 47.06c0-25.9 21.16-47.06 47.06-47.06S448 171 448 196.9s-21.16 47.06-47.06 47.06h-47.06zm-23.72 0c0 25.9-21.16 47.06-47.06 47.06s-47.06-21.16-47.06-47.06V79.06c0-25.9 21.16-47.06 47.06-47.06s47.06 21.16 47.06 47.06zM283.1 385.88c25.9 0 47.06 21.16 47.06 47.06S309 480 283.1 480s-47.06-21.16-47.06-47.06v-47.06zm0-23.72c-25.9 0-47.06-21.16-47.06-47.06s21.16-47.06 47.06-47.06h117.84c25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06z"/></svg>
  </span>
  <a
    class="md-button"
    href="https://nf-co.re/events/2024/training-foundational-march"
    target="_blank"
  >
    Register here
    <span class="twemoji"
      ><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
        <path
          d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"
        ></path></svg
    ></span>
  </a>
</div>

<style type="text/css">
  .md-banner {
    display: none;
  }
</style>
 
          </div>
          
        </aside>
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="En-tÃªte">
    <a href="../../" title="training.nextflow.io" class="md-header__button md-logo" aria-label="training.nextflow.io" data-md-component="logo">
      
  <img src="../../../assets/img/nextflow-logo-white.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            training.nextflow.io
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Part 7: Hello nf-test
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
      <div class="md-header__option">
  <div class="md-select">
    
    <button class="md-header__button md-icon" aria-label="SÃ©lectionner la langue">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg>
    </button>
    <div class="md-select__inner">
      <ul class="md-select__list">
        
          <li class="md-select__item">
            <a href="../../../hello_nextflow/08_hello_nf-test/" hreflang="en" class="md-select__link">
              English
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../../pt/hello_nextflow/08_hello_nf-test/" hreflang="pt" class="md-select__link">
              PortuguÃªs
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../../es/hello_nextflow/08_hello_nf-test/" hreflang="es" class="md-select__link">
              EspaÃ±ol
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="./" hreflang="fr" class="md-select__link">
              FranÃ§ais
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</div>
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Rechercher" placeholder="Rechercher" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Recherche">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Partager" aria-label="Partager" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Effacer" aria-label="Effacer" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initialisation de la recherche
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/nextflow-io/training" title="Aller au dÃ©pÃ´t" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    nextflow-io/training
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Onglets" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../" class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../envsetup/" class="md-tabs__link">
          
  
  Environment setup

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../" class="md-tabs__link">
          
  
  Hello Nextflow

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../basic_training/" class="md-tabs__link">
          
  
  Fundamentals Training

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../advanced/" class="md-tabs__link">
          
  
  Advanced Training

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../nf_customize/" class="md-tabs__link">
          
  
  Configure nf-core

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../nf_develop/" class="md-tabs__link">
          
  
  Develop nf-core

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../troubleshoot/" class="md-tabs__link">
          
  
  Troubleshooting

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../" title="training.nextflow.io" class="md-nav__button md-logo" aria-label="training.nextflow.io" data-md-component="logo">
      
  <img src="../../../assets/img/nextflow-logo-white.png" alt="logo">

    </a>
    training.nextflow.io
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/nextflow-io/training" title="Aller au dÃ©pÃ´t" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    nextflow-io/training
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Environment setup
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Environment setup
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../envsetup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Environment Setup
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../envsetup/01_setup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    GitHub Codespaces
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../envsetup/02_local/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Local installation
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Hello Nextflow
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Hello Nextflow
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Hello Nextflow
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../01_orientation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Orientation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../02_hello_world/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Part 1: Hello World
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../03_hello_containers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Part 2: Hello Containers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../04_hello_genomics/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Part 3: Hello Genomics
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../05_hello_operators/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Part 4: Hello Operators
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../06_hello_config/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Part 5: Hello Config
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../07_hello_modules/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Part 6: Hello Modules
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Part 7: Hello nf-test
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Part 7: Hello nf-test
    
  </span>
  

      </a>
      
          

<nav class="md-nav md-nav--secondary" aria-label="On this page">
       
  <label class="md-nav__title" for="__toc">
    <span class="md-nav__icon md-icon"></span>
    On this page
  </label>
  <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
     <li class="md-nav__item">
  <a href="#0-warmup" class="md-nav__link">
    <span class="md-ellipsis">
      0. Warmup
    </span>
  </a>
  
    <nav class="md-nav" aria-label="0. Warmup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#01-explore-the-hello-nf-test-directory" class="md-nav__link">
    <span class="md-ellipsis">
      0.1. Explore the hello-nf-test directory
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#02-create-a-symbolic-link-to-the-data" class="md-nav__link">
    <span class="md-ellipsis">
      0.2. Create a symbolic link to the data
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#03-run-the-workflow-using-the-appropriate-profiles" class="md-nav__link">
    <span class="md-ellipsis">
      0.3 Run the workflow using the appropriate profiles
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#04-initialize-nf-test" class="md-nav__link">
    <span class="md-ellipsis">
      0.4. Initialize nf-test
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#takeaway" class="md-nav__link">
    <span class="md-ellipsis">
      Takeaway
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#whats-next" class="md-nav__link">
    <span class="md-ellipsis">
      What's next?
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>  <li class="md-nav__item">
  <a href="#1-test-a-process-for-success-and-matching-outputs" class="md-nav__link">
    <span class="md-ellipsis">
      1. Test a process for success and matching outputs
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1. Test a process for success and matching outputs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11-generate-a-test-file-stub" class="md-nav__link">
    <span class="md-ellipsis">
      1.1. Generate a test file stub
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-move-the-test-file-and-update-the-script-path" class="md-nav__link">
    <span class="md-ellipsis">
      1.2. Move the test file and update the script path
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#13-provide-inputs-to-the-test-process" class="md-nav__link">
    <span class="md-ellipsis">
      1.3. Provide inputs to the test process
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#14-rename-the-test-based-on-the-primary-test-input" class="md-nav__link">
    <span class="md-ellipsis">
      1.4. Rename the test based on the primary test input
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#15-specify-test-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      1.5. Specify test parameters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#16-run-the-test-and-examine-the-output" class="md-nav__link">
    <span class="md-ellipsis">
      1.6. Run the test and examine the output
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#17-add-more-tests-to-samtools_index" class="md-nav__link">
    <span class="md-ellipsis">
      1.7. Add more tests to SAMTOOLS_INDEX
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#18-run-the-test-suite-and-update-the-snapshot" class="md-nav__link">
    <span class="md-ellipsis">
      1.8. Run the test suite and update the snapshot
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#takeaway_1" class="md-nav__link">
    <span class="md-ellipsis">
      Takeaway
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#whats-next_1" class="md-nav__link">
    <span class="md-ellipsis">
      What's next?
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>  <li class="md-nav__item">
  <a href="#2-add-tests-to-a-chained-process-and-test-for-contents" class="md-nav__link">
    <span class="md-ellipsis">
      2. Add tests to a chained process and test for contents
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. Add tests to a chained process and test for contents">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-generate-the-test-file-stub" class="md-nav__link">
    <span class="md-ellipsis">
      2.1. Generate the test file stub
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-move-the-test-file-and-update-the-script-path" class="md-nav__link">
    <span class="md-ellipsis">
      2.2. Move the test file and update the script path
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23-provide-inputs-using-the-setup-method" class="md-nav__link">
    <span class="md-ellipsis">
      2.3. Provide inputs using the setup method
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#24-run-test-and-examine-output" class="md-nav__link">
    <span class="md-ellipsis">
      2.4. Run test and examine output
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#25-run-again-and-observe-failure" class="md-nav__link">
    <span class="md-ellipsis">
      2.5. Run again and observe failure
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#26-use-a-content-assertion-method" class="md-nav__link">
    <span class="md-ellipsis">
      2.6. Use a content assertion method
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#27-run-again-and-observe-success" class="md-nav__link">
    <span class="md-ellipsis">
      2.7. Run again and observe success
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#28-add-more-test-data" class="md-nav__link">
    <span class="md-ellipsis">
      2.8. Add more test data
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#29-run-the-test-command" class="md-nav__link">
    <span class="md-ellipsis">
      2.9. Run the test command
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#takeaway_2" class="md-nav__link">
    <span class="md-ellipsis">
      Takeaway
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#whats-next_2" class="md-nav__link">
    <span class="md-ellipsis">
      What's next?
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>  <li class="md-nav__item">
  <a href="#3-use-locally-stored-inputs" class="md-nav__link">
    <span class="md-ellipsis">
      3. Use locally stored inputs
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. Use locally stored inputs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-generate-the-test-file-stub" class="md-nav__link">
    <span class="md-ellipsis">
      3.1. Generate the test file stub
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-move-the-test-file-and-update-the-script-path" class="md-nav__link">
    <span class="md-ellipsis">
      3.2. Move the test file and update the script path
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33-provide-inputs" class="md-nav__link">
    <span class="md-ellipsis">
      3.3. Provide inputs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#34-use-content-assertions" class="md-nav__link">
    <span class="md-ellipsis">
      3.4. Use content assertions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#35-run-the-test" class="md-nav__link">
    <span class="md-ellipsis">
      3.5. Run the test
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#takeaway_3" class="md-nav__link">
    <span class="md-ellipsis">
      Takeaway
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#whats-next_3" class="md-nav__link">
    <span class="md-ellipsis">
      What's next?
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>  <li class="md-nav__item">
  <a href="#4-add-a-workflow-level-test" class="md-nav__link">
    <span class="md-ellipsis">
      4. Add a workflow-level test
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. Add a workflow-level test">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41-generate-pipeline-level-stub-test-file" class="md-nav__link">
    <span class="md-ellipsis">
      4.1. Generate pipeline-level stub test file
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42-specify-input-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      4.2. Specify input parameters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#43-run-the-test" class="md-nav__link">
    <span class="md-ellipsis">
      4.3. Run the test
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#43-run-all-the-tests" class="md-nav__link">
    <span class="md-ellipsis">
      4.3. Run ALL the tests!
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#takeaway_4" class="md-nav__link">
    <span class="md-ellipsis">
      Takeaway
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#whats-next_4" class="md-nav__link">
    <span class="md-ellipsis">
      What's next?
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li> 
  </ul>
  
</nav>
<nav class="md-nav md-nav--secondary sidebar_resources" aria-label="Resources">
  <label class="md-nav__title">Resources</label>
  <ul class="md-nav__list">
    <li class="md-nav__item">
      <a
        href="https://nextflow.io/docs/latest/index.html"
        target="_blank"
        rel="noopener"
        class="md-nav__link"
      >
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
          <path
            d="M17.5 14.33c.79 0 1.63.08 2.5.24v1.5c-.62-.16-1.46-.24-2.5-.24-1.9 0-3.39.33-4.5.99v-1.69c1.17-.53 2.67-.8 4.5-.8M13 12.46c1.29-.53 2.79-.79 4.5-.79.79 0 1.63.07 2.5.23v1.5c-.62-.16-1.46-.24-2.5-.24-1.9 0-3.39.34-4.5.99m4.5-3.65c-1.9 0-3.39.32-4.5 1V9.84c1.23-.56 2.73-.84 4.5-.84.79 0 1.63.08 2.5.23v1.55c-.74-.19-1.59-.28-2.5-.28m3.5 8V7c-1.04-.33-2.21-.5-3.5-.5-2.05 0-3.88.5-5.5 1.5v11.5c1.62-1 3.45-1.5 5.5-1.5 1.19 0 2.36.16 3.5.5m-3.5-14c2.35 0 4.19.5 5.5 1.5v14.56c0 .12-.05.24-.16.35-.11.09-.23.17-.34.17-.11 0-.19-.02-.25-.05-1.28-.69-2.87-1.03-4.75-1.03-2.05 0-3.88.5-5.5 1.5-1.34-1-3.17-1.5-5.5-1.5-1.66 0-3.25.36-4.75 1.07-.03.01-.07.01-.12.03-.04.01-.08.02-.13.02-.11 0-.23-.04-.34-.12a.475.475 0 0 1-.16-.35V6c1.34-1 3.18-1.5 5.5-1.5 2.33 0 4.16.5 5.5 1.5 1.34-1 3.17-1.5 5.5-1.5Z"
          ></path>
        </svg>
        Nextflow Docs
      </a>
    </li>
    <li class="md-nav__item">
      <a
        href="https://www.nextflow.io/slack-invite.html"
        target="_blank"
        rel="noopener"
        class="md-nav__link"
      >
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
          <path
            d="M6 15a2 2 0 0 1-2 2 2 2 0 0 1-2-2 2 2 0 0 1 2-2h2v2m1 0a2 2 0 0 1 2-2 2 2 0 0 1 2 2v5a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-5m2-8a2 2 0 0 1-2-2 2 2 0 0 1 2-2 2 2 0 0 1 2 2v2H9m0 1a2 2 0 0 1 2 2 2 2 0 0 1-2 2H4a2 2 0 0 1-2-2 2 2 0 0 1 2-2h5m8 2a2 2 0 0 1 2-2 2 2 0 0 1 2 2 2 2 0 0 1-2 2h-2v-2m-1 0a2 2 0 0 1-2 2 2 2 0 0 1-2-2V5a2 2 0 0 1 2-2 2 2 0 0 1 2 2v5m-2 8a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2v-2h2m0-1a2 2 0 0 1-2-2 2 2 0 0 1 2-2h5a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-5Z"
          ></path>
        </svg>
        Nextflow Slack
      </a>
    </li>
    <li class="md-nav__item">
      <a
        href="https://nextflow.io/"
        target="_blank"
        rel="noopener"
        class="md-nav__link"
      >
        <svg
          version="1.1"
          id="Layer_1"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="80 50 350 350"
        >
          <style type="text/css">
            .st0 {
              fill: "gray";
            }
          </style>
          <path
            class="st0"
            d="M124.5,171.5c39.4,2.6,71.1,34.3,73.5,73.8h46.1c-2.6-65-54.7-117.2-119.6-119.9V171.5z"
          />
          <path
            class="st0"
            d="M198.3,255.8c-2.6,39.5-34.3,71.1-73.8,73.5v46.1c65-2.6,117.2-54.7,119.9-119.6H198.3z"
          />
          <path
            class="st0"
            d="M300.7,245c2.6-39.5,34.3-71.1,73.8-73.5v-46.1c-65,2.6-117.2,54.7-119.9,119.6H300.7z"
          />
          <path
            class="st0"
            d="M374.5,329.3c-39.4-2.6-71.1-34.3-73.5-73.8h-46.1c2.6,65,54.7,117.2,119.6,119.9V329.3z"
          />
        </svg>
        Nextflow Homepage
      </a>
    </li>
    <li class="md-nav__item">
      <a
        href="https://seqera.io/"
        target="_blank"
        rel="noopener"
        class="md-nav__link"
      >
        <?xml version="1.0" encoding="utf-8"?>
        <!-- Generator: Adobe Illustrator 28.3.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
        <svg
          version="1.1"
          id="Layer_1"
          xmlns="http://www.w3.org/2000/svg"
          xmlns:xlink="http://www.w3.org/1999/xlink"
          x="0px"
          y="0px"
          viewBox="80 50 350 350"
          style="enable-background: new 0 0 500 500"
          xml:space="preserve"
        >
          <style type="text/css">
            .st0 {
              clip-path: url(#SVGID_00000006699037935518914080000000086571810102047141_);
            }
            .st1 {
              fill: "gray";
            }
          </style>
          <g>
            <defs>
              <rect id="SVGID_1_" x="125" y="125" width="250" height="250" />
            </defs>
            <clipPath
              id="SVGID_00000183214694142566821210000012389151436317298101_"
            >
              <use xlink:href="#SVGID_1_" style="overflow: visible" />
            </clipPath>
            <g
              style="
                clip-path: url(#SVGID_00000183214694142566821210000012389151436317298101_);
              "
            >
              <path
                class="st1"
                d="M375,333l-0.1-0.9l-0.1-0.8l-0.1-0.9l-0.1-0.9l-0.1-0.8l-0.1-0.9l-0.1-0.8l-0.2-0.9l-0.2-0.8l-0.2-0.8
                      l-0.2-0.8l-0.2-0.8l-0.2-0.8l-0.3-0.8l-0.3-0.8l-0.3-0.8l-0.3-0.8l-0.4-0.8l-0.4-0.8l-0.4-0.8l-0.4-0.8l-0.4-0.8l-0.4-0.8
                      l-0.4-0.7l-0.5-0.7l-0.5-0.7l-0.5-0.7l-0.5-0.7l-0.5-0.7l-0.5-0.7l-0.5-0.7L365,308l-0.6-0.6l-0.6-0.6l-0.6-0.6l-0.6-0.6L362,305
                      l-0.6-0.6l-0.7-0.6l-0.6-0.5l-1.2,0.7l-0.8,0.5l-0.8,0.4l-0.8,0.4l-0.8,0.4l-0.8,0.4l-0.9,0.4l-0.9,0.4l-0.9,0.3l-0.9,0.3
                      l-0.9,0.3l-0.9,0.3l-0.9,0.3l-0.9,0.3l-0.9,0.2l-0.9,0.2l-0.9,0.2l-0.9,0.2l-0.9,0.2l-0.9,0.1l-0.9,0.1l-0.9,0.1l-0.9,0.1
                      l-0.9,0.1l-0.9,0.1l-0.9,0.1l-0.9,0l-0.9,0h-57.5l59.7,16.4l0.4,0.1l0.4,0.1l0.4,0.1l0.3,0.2l0.3,0.2l0.3,0.2l0.3,0.2l0.3,0.2
                      l0.3,0.2l0.3,0.2l0.3,0.2l0.3,0.3l0.2,0.3l0.2,0.3l0.2,0.3l0.2,0.3l0.2,0.3l0.2,0.3l0.2,0.3l0.1,0.3l0.1,0.3l0.1,0.4l0.1,0.4
                      l0.1,0.4l0.1,0.4l0,0.4l0,0.4l0,0.4l0,0.4l0,0.4l0,0.4l-0.1,0.4l-0.1,0.4l-0.1,0.4l-0.1,0.3l-0.1,0.4l-0.1,0.3l-0.2,0.3l-0.2,0.3
                      l-0.2,0.3l-0.2,0.3l-0.2,0.3l-0.2,0.3l-0.2,0.3l-0.3,0.3l-0.3,0.3l-0.3,0.2l-0.3,0.2l-0.3,0.2l-0.3,0.2l-0.3,0.2l-0.3,0.2
                      l-0.3,0.1l-0.4,0.2l-0.4,0.1l-0.3,0.1l-0.4,0.1l-0.4,0.1l-0.4,0.1l-0.4,0l-0.4,0l-0.4,0H125V375h209.7l0.9,0l0.9,0l0.9,0l0.8-0.1
                      l0.9-0.1l0.8-0.1l0.9-0.1l0.8-0.1l0.8-0.1l0.8-0.2l0.8-0.2l0.8-0.2l0.8-0.2l0.8-0.2l0.8-0.3l0.8-0.3l0.8-0.3l0.8-0.3l0.8-0.3
                      l0.8-0.4l0.8-0.4l0.8-0.4l0.8-0.4l0.8-0.4l0.7-0.4l0.7-0.5l0.7-0.5l0.7-0.5l0.7-0.5l0.7-0.5l0.7-0.5l0.7-0.5l0.7-0.5l0.7-0.5
                      l0.6-0.6l0.6-0.6l0.6-0.6l0.6-0.6l0.6-0.6l0.6-0.6l0.6-0.7l0.5-0.7l0.5-0.7l0.5-0.7l0.5-0.7l0.5-0.7l0.5-0.7l0.5-0.7l0.4-0.7
                      l0.4-0.8l0.4-0.8l0.4-0.8l0.4-0.8l0.4-0.8l0.4-0.8l0.3-0.8l0.3-0.8l0.3-0.8l0.3-0.8l0.2-0.8l0.2-0.8l0.2-0.8l0.2-0.8l0.2-0.8
                      l0.2-0.8l0.1-0.8l0.1-0.9l0.1-0.9l0.1-0.8l0.1-0.9l0.1-0.9l0.1-0.8l0-0.9l0-0.9l0-0.8L375,333z"
              />
              <path
                class="st1"
                d="M375,260.4l-0.1-0.9l-0.1-0.9l-0.1-0.8l-0.1-0.9l-0.1-0.8l-0.1-0.8l-0.1-0.8l-0.2-0.8l-0.2-0.8l-0.2-0.8
                      l-0.2-0.8l-0.2-0.8l-0.2-0.8l-0.3-0.8l-0.3-0.8l-0.3-0.8l-0.3-0.8l-0.4-0.8l-0.4-0.8l-0.4-0.8l-0.4-0.8l-0.4-0.8l-0.4-0.7
                      l-0.4-0.7l-0.5-0.7l-0.5-0.7l-0.5-0.7l-0.5-0.7l-0.2-0.2h0h-89.8l59.7,16.4l0.4,0.1l0.4,0.1l0.4,0.1l0.3,0.2l0.3,0.2l0.3,0.2
                      l0.3,0.2l0.3,0.2l0.3,0.2l0.3,0.2l0.3,0.2l0.3,0.3l0.2,0.3l0.2,0.3l0.2,0.3l0.2,0.3l0.2,0.3l0.2,0.3l0.2,0.3l0.1,0.4l0.1,0.3
                      l0.1,0.4l0.1,0.4l0.1,0.4l0.1,0.4l0,0.4l0,0.4l0,0.4l0,0.4l0,0.4l0,0.4l-0.1,0.4l-0.1,0.4l-0.1,0.4l-0.1,0.4l-0.1,0.3l-0.1,0.4
                      l-0.2,0.4l-0.2,0.3l-0.2,0.3l-0.2,0.3l-0.2,0.3l-0.2,0.3l-0.2,0.3l-0.3,0.3l-0.3,0.3l-0.3,0.2l-0.3,0.2l-0.3,0.2l-0.3,0.2
                      l-0.3,0.2l-0.3,0.2l-0.3,0.2l-0.4,0.2l-0.4,0.1l-0.3,0.1l-0.4,0.1l-0.4,0.1l-0.4,0.1l-0.4,0l-0.4,0l-0.4,0h-82.5h-111H125v32.2
                      h122.8h86.9h0.9l0.9,0l0.9-0.1l0.8-0.1l0.9-0.1l0.8-0.1l0.9-0.1l0.8-0.1l0.8-0.2l0.8-0.2l0.8-0.2l0.8-0.2l0.8-0.2l0.8-0.2l0.8-0.3
                      l0.8-0.3l0.8-0.3l0.8-0.3l0.8-0.3l0.8-0.4l0.8-0.4l0.2-0.1l0.6-0.3l0.8-0.4l0.8-0.4l0.7-0.4l0.7-0.4l0.7-0.5l0.7-0.5l0.7-0.5
                      l0.7-0.5l0.7-0.5l0.7-0.5l0.7-0.5l0.7-0.6l0.6-0.6l0.6-0.6l0.6-0.6l0.6-0.6l0.6-0.6l0.6-0.6l0.6-0.6l0.5-0.7l0.5-0.7l0.5-0.7
                      l0.5-0.7l0.5-0.7l0.5-0.7l0.5-0.7l0.4-0.7l0.4-0.7l0.4-0.8l0.4-0.8l0.4-0.8l0.4-0.8l0.4-0.8l0.3-0.8l0.3-0.8l0.3-0.8l0.3-0.8
                      l0.2-0.8l0.2-0.8l0.2-0.8l0.2-0.8l0.2-0.8l0.2-0.8l0.1-0.8l0.1-0.9l0.1-0.8l0.1-0.9l0.1-0.8l0.1-0.9l0.1-0.9l0-0.8l0-0.9l0-0.9
                      L375,260.4z"
              />
              <path
                class="st1"
                d="M165.3,197.6l-0.9,0l-0.8,0l-0.9,0l-0.9,0.1l-0.8,0.1l-0.9,0.1l-0.8,0.1l-0.8,0.1l-0.8,0.2l-0.8,0.2l-0.8,0.2
                      l-0.8,0.2l-0.8,0.2l-0.8,0.2l-0.8,0.3l-0.8,0.3l-0.8,0.3l-0.8,0.3l-0.8,0.3l-0.8,0.4l-0.8,0.4l-0.2,0.1l-0.6,0.3l-0.8,0.4
                      l-0.8,0.4l-0.8,0.4l-0.7,0.4l-0.7,0.5l-0.7,0.5L142,205l-0.7,0.5l-0.7,0.5l-0.7,0.5l-0.7,0.5l-0.7,0.6l-0.6,0.6l-0.6,0.6l-0.6,0.6
                      l-0.6,0.6l-0.6,0.6l-0.6,0.6l-0.6,0.6l-0.5,0.6l-0.5,0.7l-0.5,0.7l-0.5,0.7l-0.5,0.7l-0.5,0.7l-0.4,0.7l-0.5,0.7l-0.4,0.7
                      l-0.4,0.8l-0.4,0.8l-0.4,0.8l-0.4,0.8l-0.3,0.8l-0.3,0.8l-0.3,0.8l-0.3,0.8l-0.3,0.8l-0.3,0.8l-0.2,0.8l-0.2,0.8l-0.2,0.8
                      l-0.2,0.8l-0.2,0.8l-0.2,0.8l-0.1,0.9l-0.1,0.9l-0.1,0.8l-0.1,0.9l-0.1,0.9l0,0.9l0,0.9v0.9v0.9l0,0.8l0,0.9l0.1,0.8l0.1,0.8
                      l0.1,0.9l0.1,0.9l0.1,0.8l0.2,0.9l0.2,0.8l0.2,0.8l0.2,0.8l0.2,0.8l0.2,0.8l0.3,0.8l0.3,0.8l0.3,0.8l0.3,0.8l0.3,0.8l0.3,0.8
                      l0.4,0.8l0.4,0.8l0.4,0.8l0.4,0.8l0.4,0.7l0.5,0.7l0.4,0.7l0.5,0.7l0.5,0.7l0.5,0.7l0.2,0.2h89.8l-59.7-16.4l-0.4-0.1l-0.3-0.1
                      l-0.4-0.1l-0.3-0.2l-0.3-0.2l-0.3-0.2l-0.3-0.2l-0.3-0.2l-0.3-0.2l-0.3-0.2l-0.3-0.2l-0.2-0.3l-0.2-0.3l-0.2-0.3l-0.2-0.3
                      l-0.2-0.3l-0.2-0.3l-0.2-0.3l-0.2-0.3l-0.1-0.4l-0.1-0.4l-0.1-0.3l-0.1-0.4l-0.1-0.4l-0.1-0.4l0-0.4l0-0.4l0-0.4l0-0.4l0-0.4
                      l0-0.4l0.1-0.4l0.1-0.4l0.1-0.4l0.1-0.4l0.1-0.4l0.1-0.3l0.2-0.3l0.2-0.3l0.2-0.3l0.2-0.3l0.2-0.3l0.2-0.3l0.2-0.3l0.2-0.3
                      l0.3-0.3l0.3-0.2l0.3-0.2l0.3-0.2l0.3-0.2l0.3-0.2l0.3-0.2l0.3-0.2l0.4-0.2l0.3-0.1l0.4-0.1l0.4-0.1l0.4-0.1l0.4-0.1l0.4,0l0.4,0
                      h0.4h82.5h111H375v-32.3H252.2H165.3z"
              />
              <path
                class="st1"
                d="M165.3,125l-0.9,0l-0.8,0l-0.9,0.1l-0.9,0.1l-0.8,0.1l-0.9,0.1l-0.8,0.1l-0.8,0.1l-0.8,0.2l-0.8,0.2l-0.8,0.2
                      l-0.8,0.2l-0.8,0.2l-0.8,0.2l-0.8,0.3l-0.8,0.3l-0.8,0.3l-0.8,0.3l-0.8,0.3l-0.8,0.3l-0.8,0.4l-0.8,0.4l-0.8,0.4l-0.8,0.4
                      l-0.8,0.4l-0.7,0.5l-0.7,0.4l-0.7,0.5l-0.7,0.5l-0.7,0.5l-0.7,0.5l-0.7,0.5l-0.7,0.6l-0.7,0.6l-0.6,0.6l-0.6,0.6l-0.6,0.6
                      l-0.6,0.6l-0.6,0.6l-0.6,0.6l-0.6,0.6l-0.5,0.7l-0.5,0.7l-0.5,0.7l-0.5,0.7l-0.5,0.7l-0.5,0.7l-0.4,0.7l-0.5,0.7l-0.4,0.7
                      l-0.4,0.8l-0.4,0.8l-0.4,0.8l-0.4,0.8l-0.3,0.8l-0.3,0.8l-0.3,0.8l-0.3,0.8l-0.3,0.8l-0.3,0.8l-0.2,0.8l-0.2,0.8l-0.2,0.8
                      l-0.2,0.8l-0.2,0.8l-0.2,0.8l-0.1,0.9l-0.1,0.8l-0.1,0.9l-0.1,0.8l-0.1,0.9l0,0.9l0,0.9v0.9v0.9l0,0.9l0,0.8l0.1,0.9l0.1,0.9
                      l0.1,0.8l0.1,0.8l0.1,0.8l0.2,0.8l0.2,0.8l0.2,0.8l0.2,0.8l0.2,0.8l0.2,0.8l0.3,0.8l0.3,0.8l0.3,0.8l0.3,0.8l0.3,0.8l0.3,0.8
                      l0.4,0.8l0.4,0.8l0.4,0.8l0.4,0.8l0.4,0.7l0.5,0.7l0.4,0.7l0.5,0.7l0.5,0.7l0.5,0.7l0.5,0.7l0.5,0.7l0.5,0.7l0.6,0.6l0.6,0.6
                      l0.6,0.6l0.6,0.6l0.6,0.6l0.6,0.6l0.6,0.6l0.7,0.6l0.6,0.5h0l1.1-0.7l0.8-0.5l0.8-0.5l0.8-0.4l0.8-0.4l0.9-0.4l0.9-0.4l0.9-0.4
                      l0.9-0.3l0.9-0.3l0.9-0.3l0.9-0.3l0.9-0.3l0.9-0.3l0.9-0.2l0.9-0.2l0.9-0.2l0.9-0.2l0.9-0.2l0.9-0.1l0.9-0.1l0.9-0.1l0.9-0.1
                      l0.9-0.1l0.9-0.1l0.9,0l0.9,0l0.9,0h57.5l-59.7-16.4l-0.4-0.1l-0.3-0.1l-0.4-0.1l-0.3-0.1l-0.3-0.2l-0.3-0.2l-0.3-0.2l-0.3-0.2
                      l-0.3-0.2l-0.3-0.2l-0.3-0.3l-0.2-0.3l-0.2-0.3l-0.2-0.3l-0.2-0.3l-0.2-0.3l-0.2-0.3l-0.2-0.3l-0.2-0.3l-0.1-0.3l-0.1-0.4
                      l-0.1-0.3l-0.1-0.4l-0.1-0.4l-0.1-0.4l0-0.4l0-0.4l0-0.4l0-0.4l0-0.4l0-0.4l0.1-0.4l0.1-0.4l0.1-0.4l0.1-0.4l0.1-0.4l0.1-0.3
                      l0.2-0.3l0.2-0.3l0.2-0.3l0.2-0.3l0.2-0.3l0.2-0.3l0.2-0.3l0.2-0.3l0.3-0.2l0.3-0.2l0.3-0.2l0.3-0.2l0.3-0.2l0.3-0.2l0.3-0.2
                      l0.3-0.2l0.4-0.1l0.3-0.1l0.4-0.1l0.4-0.1l0.4-0.1l0.4-0.1l0.4,0l0.4,0l0.4,0H375V125H165.3z"
              />
            </g>
          </g>
        </svg>
        Seqera
      </a>
    </li>
    <li class="md-nav__item">
      <a
        href="https://github.com/nextflow-io/training"
        target="_blank"
        rel="noopener"
        class="md-nav__link"
      >
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
          <path
            d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"
          ></path>
        </svg>
        Training on GitHub
      </a>
    </li>
  </ul>
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../09_hello_nf-core/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Part 8: Hello nf-core
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../10_hello_seqera/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Part 9: Hello Seqera
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Fundamentals Training
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Fundamentals Training
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../basic_training/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Index
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../basic_training/orientation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Orientation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../basic_training/intro/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Intro
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../basic_training/rnaseq_pipeline/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Rnaseq pipeline
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../basic_training/containers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Dependencies and containers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../basic_training/channels/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Channels
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../basic_training/processes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Processes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../basic_training/operators/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Operators
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../basic_training/groovy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Groovy introduction
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../basic_training/modules/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Modularization
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../basic_training/config/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../basic_training/executors/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Executors
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../basic_training/seqera_platform/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Seqera platform
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../basic_training/cache_and_resume/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cache and resume
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../basic_training/debugging/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Debugging
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Advanced Training
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Advanced Training
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../advanced/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Advanced Training
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../advanced/orientation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Orientation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../advanced/operators/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Operator Tour
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../advanced/metadata/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Metadata Propagation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../advanced/grouping/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Grouping and Splitting
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../advanced/groovy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Groovy Imports
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../advanced/structure/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Workflow Structure
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../advanced/configuration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../advanced/summary/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Summary
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../advanced/support/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Support
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Configure nf-core
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Configure nf-core
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../nf_customize/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configure nf-core
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../nf_customize/01_orientation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Orientation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../nf_customize/02_nf-core/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    What is nf-core?
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../nf_customize/03_execution/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    nf-core/demo
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../nf_customize/04_config/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuration options
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../nf_customize/05_tools/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tools for users
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Develop nf-core
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Develop nf-core
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../nf_develop/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Develop nf-core
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../nf_develop/1_01_orientation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Orientation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../nf_develop/1_02_create/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting started
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../nf_develop/1_03_pipeline/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Adding modules
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../nf_develop/1_04_parameters/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Adding parameters
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Troubleshooting
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Troubleshooting
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../troubleshoot/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Troubleshooting
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../troubleshoot/01_orientation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Orientation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../troubleshoot/01_exercise/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Exercise 1
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../troubleshoot/02_exercise/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Exercise 2
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../troubleshoot/03_exercise/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Exercise 3
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../troubleshoot/04_exercise/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Exercise 4
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../troubleshoot/05_exercise/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Exercise 5
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../troubleshoot/06_exercise/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Exercise 6
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                      

<nav class="md-nav md-nav--secondary" aria-label="On this page">
       
  <label class="md-nav__title" for="__toc">
    <span class="md-nav__icon md-icon"></span>
    On this page
  </label>
  <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
     <li class="md-nav__item">
  <a href="#0-warmup" class="md-nav__link">
    <span class="md-ellipsis">
      0. Warmup
    </span>
  </a>
  
    <nav class="md-nav" aria-label="0. Warmup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#01-explore-the-hello-nf-test-directory" class="md-nav__link">
    <span class="md-ellipsis">
      0.1. Explore the hello-nf-test directory
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#02-create-a-symbolic-link-to-the-data" class="md-nav__link">
    <span class="md-ellipsis">
      0.2. Create a symbolic link to the data
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#03-run-the-workflow-using-the-appropriate-profiles" class="md-nav__link">
    <span class="md-ellipsis">
      0.3 Run the workflow using the appropriate profiles
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#04-initialize-nf-test" class="md-nav__link">
    <span class="md-ellipsis">
      0.4. Initialize nf-test
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#takeaway" class="md-nav__link">
    <span class="md-ellipsis">
      Takeaway
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#whats-next" class="md-nav__link">
    <span class="md-ellipsis">
      What's next?
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>  <li class="md-nav__item">
  <a href="#1-test-a-process-for-success-and-matching-outputs" class="md-nav__link">
    <span class="md-ellipsis">
      1. Test a process for success and matching outputs
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1. Test a process for success and matching outputs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11-generate-a-test-file-stub" class="md-nav__link">
    <span class="md-ellipsis">
      1.1. Generate a test file stub
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-move-the-test-file-and-update-the-script-path" class="md-nav__link">
    <span class="md-ellipsis">
      1.2. Move the test file and update the script path
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#13-provide-inputs-to-the-test-process" class="md-nav__link">
    <span class="md-ellipsis">
      1.3. Provide inputs to the test process
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#14-rename-the-test-based-on-the-primary-test-input" class="md-nav__link">
    <span class="md-ellipsis">
      1.4. Rename the test based on the primary test input
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#15-specify-test-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      1.5. Specify test parameters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#16-run-the-test-and-examine-the-output" class="md-nav__link">
    <span class="md-ellipsis">
      1.6. Run the test and examine the output
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#17-add-more-tests-to-samtools_index" class="md-nav__link">
    <span class="md-ellipsis">
      1.7. Add more tests to SAMTOOLS_INDEX
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#18-run-the-test-suite-and-update-the-snapshot" class="md-nav__link">
    <span class="md-ellipsis">
      1.8. Run the test suite and update the snapshot
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#takeaway_1" class="md-nav__link">
    <span class="md-ellipsis">
      Takeaway
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#whats-next_1" class="md-nav__link">
    <span class="md-ellipsis">
      What's next?
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>  <li class="md-nav__item">
  <a href="#2-add-tests-to-a-chained-process-and-test-for-contents" class="md-nav__link">
    <span class="md-ellipsis">
      2. Add tests to a chained process and test for contents
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. Add tests to a chained process and test for contents">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-generate-the-test-file-stub" class="md-nav__link">
    <span class="md-ellipsis">
      2.1. Generate the test file stub
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-move-the-test-file-and-update-the-script-path" class="md-nav__link">
    <span class="md-ellipsis">
      2.2. Move the test file and update the script path
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23-provide-inputs-using-the-setup-method" class="md-nav__link">
    <span class="md-ellipsis">
      2.3. Provide inputs using the setup method
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#24-run-test-and-examine-output" class="md-nav__link">
    <span class="md-ellipsis">
      2.4. Run test and examine output
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#25-run-again-and-observe-failure" class="md-nav__link">
    <span class="md-ellipsis">
      2.5. Run again and observe failure
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#26-use-a-content-assertion-method" class="md-nav__link">
    <span class="md-ellipsis">
      2.6. Use a content assertion method
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#27-run-again-and-observe-success" class="md-nav__link">
    <span class="md-ellipsis">
      2.7. Run again and observe success
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#28-add-more-test-data" class="md-nav__link">
    <span class="md-ellipsis">
      2.8. Add more test data
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#29-run-the-test-command" class="md-nav__link">
    <span class="md-ellipsis">
      2.9. Run the test command
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#takeaway_2" class="md-nav__link">
    <span class="md-ellipsis">
      Takeaway
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#whats-next_2" class="md-nav__link">
    <span class="md-ellipsis">
      What's next?
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>  <li class="md-nav__item">
  <a href="#3-use-locally-stored-inputs" class="md-nav__link">
    <span class="md-ellipsis">
      3. Use locally stored inputs
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. Use locally stored inputs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-generate-the-test-file-stub" class="md-nav__link">
    <span class="md-ellipsis">
      3.1. Generate the test file stub
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-move-the-test-file-and-update-the-script-path" class="md-nav__link">
    <span class="md-ellipsis">
      3.2. Move the test file and update the script path
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33-provide-inputs" class="md-nav__link">
    <span class="md-ellipsis">
      3.3. Provide inputs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#34-use-content-assertions" class="md-nav__link">
    <span class="md-ellipsis">
      3.4. Use content assertions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#35-run-the-test" class="md-nav__link">
    <span class="md-ellipsis">
      3.5. Run the test
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#takeaway_3" class="md-nav__link">
    <span class="md-ellipsis">
      Takeaway
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#whats-next_3" class="md-nav__link">
    <span class="md-ellipsis">
      What's next?
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>  <li class="md-nav__item">
  <a href="#4-add-a-workflow-level-test" class="md-nav__link">
    <span class="md-ellipsis">
      4. Add a workflow-level test
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. Add a workflow-level test">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41-generate-pipeline-level-stub-test-file" class="md-nav__link">
    <span class="md-ellipsis">
      4.1. Generate pipeline-level stub test file
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42-specify-input-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      4.2. Specify input parameters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#43-run-the-test" class="md-nav__link">
    <span class="md-ellipsis">
      4.3. Run the test
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#43-run-all-the-tests" class="md-nav__link">
    <span class="md-ellipsis">
      4.3. Run ALL the tests!
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#takeaway_4" class="md-nav__link">
    <span class="md-ellipsis">
      Takeaway
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#whats-next_4" class="md-nav__link">
    <span class="md-ellipsis">
      What's next?
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li> 
  </ul>
  
</nav>
<nav class="md-nav md-nav--secondary sidebar_resources" aria-label="Resources">
  <label class="md-nav__title">Resources</label>
  <ul class="md-nav__list">
    <li class="md-nav__item">
      <a
        href="https://nextflow.io/docs/latest/index.html"
        target="_blank"
        rel="noopener"
        class="md-nav__link"
      >
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
          <path
            d="M17.5 14.33c.79 0 1.63.08 2.5.24v1.5c-.62-.16-1.46-.24-2.5-.24-1.9 0-3.39.33-4.5.99v-1.69c1.17-.53 2.67-.8 4.5-.8M13 12.46c1.29-.53 2.79-.79 4.5-.79.79 0 1.63.07 2.5.23v1.5c-.62-.16-1.46-.24-2.5-.24-1.9 0-3.39.34-4.5.99m4.5-3.65c-1.9 0-3.39.32-4.5 1V9.84c1.23-.56 2.73-.84 4.5-.84.79 0 1.63.08 2.5.23v1.55c-.74-.19-1.59-.28-2.5-.28m3.5 8V7c-1.04-.33-2.21-.5-3.5-.5-2.05 0-3.88.5-5.5 1.5v11.5c1.62-1 3.45-1.5 5.5-1.5 1.19 0 2.36.16 3.5.5m-3.5-14c2.35 0 4.19.5 5.5 1.5v14.56c0 .12-.05.24-.16.35-.11.09-.23.17-.34.17-.11 0-.19-.02-.25-.05-1.28-.69-2.87-1.03-4.75-1.03-2.05 0-3.88.5-5.5 1.5-1.34-1-3.17-1.5-5.5-1.5-1.66 0-3.25.36-4.75 1.07-.03.01-.07.01-.12.03-.04.01-.08.02-.13.02-.11 0-.23-.04-.34-.12a.475.475 0 0 1-.16-.35V6c1.34-1 3.18-1.5 5.5-1.5 2.33 0 4.16.5 5.5 1.5 1.34-1 3.17-1.5 5.5-1.5Z"
          ></path>
        </svg>
        Nextflow Docs
      </a>
    </li>
    <li class="md-nav__item">
      <a
        href="https://www.nextflow.io/slack-invite.html"
        target="_blank"
        rel="noopener"
        class="md-nav__link"
      >
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
          <path
            d="M6 15a2 2 0 0 1-2 2 2 2 0 0 1-2-2 2 2 0 0 1 2-2h2v2m1 0a2 2 0 0 1 2-2 2 2 0 0 1 2 2v5a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-5m2-8a2 2 0 0 1-2-2 2 2 0 0 1 2-2 2 2 0 0 1 2 2v2H9m0 1a2 2 0 0 1 2 2 2 2 0 0 1-2 2H4a2 2 0 0 1-2-2 2 2 0 0 1 2-2h5m8 2a2 2 0 0 1 2-2 2 2 0 0 1 2 2 2 2 0 0 1-2 2h-2v-2m-1 0a2 2 0 0 1-2 2 2 2 0 0 1-2-2V5a2 2 0 0 1 2-2 2 2 0 0 1 2 2v5m-2 8a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2v-2h2m0-1a2 2 0 0 1-2-2 2 2 0 0 1 2-2h5a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-5Z"
          ></path>
        </svg>
        Nextflow Slack
      </a>
    </li>
    <li class="md-nav__item">
      <a
        href="https://nextflow.io/"
        target="_blank"
        rel="noopener"
        class="md-nav__link"
      >
        <svg
          version="1.1"
          id="Layer_1"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="80 50 350 350"
        >
          <style type="text/css">
            .st0 {
              fill: "gray";
            }
          </style>
          <path
            class="st0"
            d="M124.5,171.5c39.4,2.6,71.1,34.3,73.5,73.8h46.1c-2.6-65-54.7-117.2-119.6-119.9V171.5z"
          />
          <path
            class="st0"
            d="M198.3,255.8c-2.6,39.5-34.3,71.1-73.8,73.5v46.1c65-2.6,117.2-54.7,119.9-119.6H198.3z"
          />
          <path
            class="st0"
            d="M300.7,245c2.6-39.5,34.3-71.1,73.8-73.5v-46.1c-65,2.6-117.2,54.7-119.9,119.6H300.7z"
          />
          <path
            class="st0"
            d="M374.5,329.3c-39.4-2.6-71.1-34.3-73.5-73.8h-46.1c2.6,65,54.7,117.2,119.6,119.9V329.3z"
          />
        </svg>
        Nextflow Homepage
      </a>
    </li>
    <li class="md-nav__item">
      <a
        href="https://seqera.io/"
        target="_blank"
        rel="noopener"
        class="md-nav__link"
      >
        <?xml version="1.0" encoding="utf-8"?>
        <!-- Generator: Adobe Illustrator 28.3.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
        <svg
          version="1.1"
          id="Layer_1"
          xmlns="http://www.w3.org/2000/svg"
          xmlns:xlink="http://www.w3.org/1999/xlink"
          x="0px"
          y="0px"
          viewBox="80 50 350 350"
          style="enable-background: new 0 0 500 500"
          xml:space="preserve"
        >
          <style type="text/css">
            .st0 {
              clip-path: url(#SVGID_00000006699037935518914080000000086571810102047141_);
            }
            .st1 {
              fill: "gray";
            }
          </style>
          <g>
            <defs>
              <rect id="SVGID_1_" x="125" y="125" width="250" height="250" />
            </defs>
            <clipPath
              id="SVGID_00000183214694142566821210000012389151436317298101_"
            >
              <use xlink:href="#SVGID_1_" style="overflow: visible" />
            </clipPath>
            <g
              style="
                clip-path: url(#SVGID_00000183214694142566821210000012389151436317298101_);
              "
            >
              <path
                class="st1"
                d="M375,333l-0.1-0.9l-0.1-0.8l-0.1-0.9l-0.1-0.9l-0.1-0.8l-0.1-0.9l-0.1-0.8l-0.2-0.9l-0.2-0.8l-0.2-0.8
                      l-0.2-0.8l-0.2-0.8l-0.2-0.8l-0.3-0.8l-0.3-0.8l-0.3-0.8l-0.3-0.8l-0.4-0.8l-0.4-0.8l-0.4-0.8l-0.4-0.8l-0.4-0.8l-0.4-0.8
                      l-0.4-0.7l-0.5-0.7l-0.5-0.7l-0.5-0.7l-0.5-0.7l-0.5-0.7l-0.5-0.7l-0.5-0.7L365,308l-0.6-0.6l-0.6-0.6l-0.6-0.6l-0.6-0.6L362,305
                      l-0.6-0.6l-0.7-0.6l-0.6-0.5l-1.2,0.7l-0.8,0.5l-0.8,0.4l-0.8,0.4l-0.8,0.4l-0.8,0.4l-0.9,0.4l-0.9,0.4l-0.9,0.3l-0.9,0.3
                      l-0.9,0.3l-0.9,0.3l-0.9,0.3l-0.9,0.3l-0.9,0.2l-0.9,0.2l-0.9,0.2l-0.9,0.2l-0.9,0.2l-0.9,0.1l-0.9,0.1l-0.9,0.1l-0.9,0.1
                      l-0.9,0.1l-0.9,0.1l-0.9,0.1l-0.9,0l-0.9,0h-57.5l59.7,16.4l0.4,0.1l0.4,0.1l0.4,0.1l0.3,0.2l0.3,0.2l0.3,0.2l0.3,0.2l0.3,0.2
                      l0.3,0.2l0.3,0.2l0.3,0.2l0.3,0.3l0.2,0.3l0.2,0.3l0.2,0.3l0.2,0.3l0.2,0.3l0.2,0.3l0.2,0.3l0.1,0.3l0.1,0.3l0.1,0.4l0.1,0.4
                      l0.1,0.4l0.1,0.4l0,0.4l0,0.4l0,0.4l0,0.4l0,0.4l0,0.4l-0.1,0.4l-0.1,0.4l-0.1,0.4l-0.1,0.3l-0.1,0.4l-0.1,0.3l-0.2,0.3l-0.2,0.3
                      l-0.2,0.3l-0.2,0.3l-0.2,0.3l-0.2,0.3l-0.2,0.3l-0.3,0.3l-0.3,0.3l-0.3,0.2l-0.3,0.2l-0.3,0.2l-0.3,0.2l-0.3,0.2l-0.3,0.2
                      l-0.3,0.1l-0.4,0.2l-0.4,0.1l-0.3,0.1l-0.4,0.1l-0.4,0.1l-0.4,0.1l-0.4,0l-0.4,0l-0.4,0H125V375h209.7l0.9,0l0.9,0l0.9,0l0.8-0.1
                      l0.9-0.1l0.8-0.1l0.9-0.1l0.8-0.1l0.8-0.1l0.8-0.2l0.8-0.2l0.8-0.2l0.8-0.2l0.8-0.2l0.8-0.3l0.8-0.3l0.8-0.3l0.8-0.3l0.8-0.3
                      l0.8-0.4l0.8-0.4l0.8-0.4l0.8-0.4l0.8-0.4l0.7-0.4l0.7-0.5l0.7-0.5l0.7-0.5l0.7-0.5l0.7-0.5l0.7-0.5l0.7-0.5l0.7-0.5l0.7-0.5
                      l0.6-0.6l0.6-0.6l0.6-0.6l0.6-0.6l0.6-0.6l0.6-0.6l0.6-0.7l0.5-0.7l0.5-0.7l0.5-0.7l0.5-0.7l0.5-0.7l0.5-0.7l0.5-0.7l0.4-0.7
                      l0.4-0.8l0.4-0.8l0.4-0.8l0.4-0.8l0.4-0.8l0.4-0.8l0.3-0.8l0.3-0.8l0.3-0.8l0.3-0.8l0.2-0.8l0.2-0.8l0.2-0.8l0.2-0.8l0.2-0.8
                      l0.2-0.8l0.1-0.8l0.1-0.9l0.1-0.9l0.1-0.8l0.1-0.9l0.1-0.9l0.1-0.8l0-0.9l0-0.9l0-0.8L375,333z"
              />
              <path
                class="st1"
                d="M375,260.4l-0.1-0.9l-0.1-0.9l-0.1-0.8l-0.1-0.9l-0.1-0.8l-0.1-0.8l-0.1-0.8l-0.2-0.8l-0.2-0.8l-0.2-0.8
                      l-0.2-0.8l-0.2-0.8l-0.2-0.8l-0.3-0.8l-0.3-0.8l-0.3-0.8l-0.3-0.8l-0.4-0.8l-0.4-0.8l-0.4-0.8l-0.4-0.8l-0.4-0.8l-0.4-0.7
                      l-0.4-0.7l-0.5-0.7l-0.5-0.7l-0.5-0.7l-0.5-0.7l-0.2-0.2h0h-89.8l59.7,16.4l0.4,0.1l0.4,0.1l0.4,0.1l0.3,0.2l0.3,0.2l0.3,0.2
                      l0.3,0.2l0.3,0.2l0.3,0.2l0.3,0.2l0.3,0.2l0.3,0.3l0.2,0.3l0.2,0.3l0.2,0.3l0.2,0.3l0.2,0.3l0.2,0.3l0.2,0.3l0.1,0.4l0.1,0.3
                      l0.1,0.4l0.1,0.4l0.1,0.4l0.1,0.4l0,0.4l0,0.4l0,0.4l0,0.4l0,0.4l0,0.4l-0.1,0.4l-0.1,0.4l-0.1,0.4l-0.1,0.4l-0.1,0.3l-0.1,0.4
                      l-0.2,0.4l-0.2,0.3l-0.2,0.3l-0.2,0.3l-0.2,0.3l-0.2,0.3l-0.2,0.3l-0.3,0.3l-0.3,0.3l-0.3,0.2l-0.3,0.2l-0.3,0.2l-0.3,0.2
                      l-0.3,0.2l-0.3,0.2l-0.3,0.2l-0.4,0.2l-0.4,0.1l-0.3,0.1l-0.4,0.1l-0.4,0.1l-0.4,0.1l-0.4,0l-0.4,0l-0.4,0h-82.5h-111H125v32.2
                      h122.8h86.9h0.9l0.9,0l0.9-0.1l0.8-0.1l0.9-0.1l0.8-0.1l0.9-0.1l0.8-0.1l0.8-0.2l0.8-0.2l0.8-0.2l0.8-0.2l0.8-0.2l0.8-0.2l0.8-0.3
                      l0.8-0.3l0.8-0.3l0.8-0.3l0.8-0.3l0.8-0.4l0.8-0.4l0.2-0.1l0.6-0.3l0.8-0.4l0.8-0.4l0.7-0.4l0.7-0.4l0.7-0.5l0.7-0.5l0.7-0.5
                      l0.7-0.5l0.7-0.5l0.7-0.5l0.7-0.5l0.7-0.6l0.6-0.6l0.6-0.6l0.6-0.6l0.6-0.6l0.6-0.6l0.6-0.6l0.6-0.6l0.5-0.7l0.5-0.7l0.5-0.7
                      l0.5-0.7l0.5-0.7l0.5-0.7l0.5-0.7l0.4-0.7l0.4-0.7l0.4-0.8l0.4-0.8l0.4-0.8l0.4-0.8l0.4-0.8l0.3-0.8l0.3-0.8l0.3-0.8l0.3-0.8
                      l0.2-0.8l0.2-0.8l0.2-0.8l0.2-0.8l0.2-0.8l0.2-0.8l0.1-0.8l0.1-0.9l0.1-0.8l0.1-0.9l0.1-0.8l0.1-0.9l0.1-0.9l0-0.8l0-0.9l0-0.9
                      L375,260.4z"
              />
              <path
                class="st1"
                d="M165.3,197.6l-0.9,0l-0.8,0l-0.9,0l-0.9,0.1l-0.8,0.1l-0.9,0.1l-0.8,0.1l-0.8,0.1l-0.8,0.2l-0.8,0.2l-0.8,0.2
                      l-0.8,0.2l-0.8,0.2l-0.8,0.2l-0.8,0.3l-0.8,0.3l-0.8,0.3l-0.8,0.3l-0.8,0.3l-0.8,0.4l-0.8,0.4l-0.2,0.1l-0.6,0.3l-0.8,0.4
                      l-0.8,0.4l-0.8,0.4l-0.7,0.4l-0.7,0.5l-0.7,0.5L142,205l-0.7,0.5l-0.7,0.5l-0.7,0.5l-0.7,0.5l-0.7,0.6l-0.6,0.6l-0.6,0.6l-0.6,0.6
                      l-0.6,0.6l-0.6,0.6l-0.6,0.6l-0.6,0.6l-0.5,0.6l-0.5,0.7l-0.5,0.7l-0.5,0.7l-0.5,0.7l-0.5,0.7l-0.4,0.7l-0.5,0.7l-0.4,0.7
                      l-0.4,0.8l-0.4,0.8l-0.4,0.8l-0.4,0.8l-0.3,0.8l-0.3,0.8l-0.3,0.8l-0.3,0.8l-0.3,0.8l-0.3,0.8l-0.2,0.8l-0.2,0.8l-0.2,0.8
                      l-0.2,0.8l-0.2,0.8l-0.2,0.8l-0.1,0.9l-0.1,0.9l-0.1,0.8l-0.1,0.9l-0.1,0.9l0,0.9l0,0.9v0.9v0.9l0,0.8l0,0.9l0.1,0.8l0.1,0.8
                      l0.1,0.9l0.1,0.9l0.1,0.8l0.2,0.9l0.2,0.8l0.2,0.8l0.2,0.8l0.2,0.8l0.2,0.8l0.3,0.8l0.3,0.8l0.3,0.8l0.3,0.8l0.3,0.8l0.3,0.8
                      l0.4,0.8l0.4,0.8l0.4,0.8l0.4,0.8l0.4,0.7l0.5,0.7l0.4,0.7l0.5,0.7l0.5,0.7l0.5,0.7l0.2,0.2h89.8l-59.7-16.4l-0.4-0.1l-0.3-0.1
                      l-0.4-0.1l-0.3-0.2l-0.3-0.2l-0.3-0.2l-0.3-0.2l-0.3-0.2l-0.3-0.2l-0.3-0.2l-0.3-0.2l-0.2-0.3l-0.2-0.3l-0.2-0.3l-0.2-0.3
                      l-0.2-0.3l-0.2-0.3l-0.2-0.3l-0.2-0.3l-0.1-0.4l-0.1-0.4l-0.1-0.3l-0.1-0.4l-0.1-0.4l-0.1-0.4l0-0.4l0-0.4l0-0.4l0-0.4l0-0.4
                      l0-0.4l0.1-0.4l0.1-0.4l0.1-0.4l0.1-0.4l0.1-0.4l0.1-0.3l0.2-0.3l0.2-0.3l0.2-0.3l0.2-0.3l0.2-0.3l0.2-0.3l0.2-0.3l0.2-0.3
                      l0.3-0.3l0.3-0.2l0.3-0.2l0.3-0.2l0.3-0.2l0.3-0.2l0.3-0.2l0.3-0.2l0.4-0.2l0.3-0.1l0.4-0.1l0.4-0.1l0.4-0.1l0.4-0.1l0.4,0l0.4,0
                      h0.4h82.5h111H375v-32.3H252.2H165.3z"
              />
              <path
                class="st1"
                d="M165.3,125l-0.9,0l-0.8,0l-0.9,0.1l-0.9,0.1l-0.8,0.1l-0.9,0.1l-0.8,0.1l-0.8,0.1l-0.8,0.2l-0.8,0.2l-0.8,0.2
                      l-0.8,0.2l-0.8,0.2l-0.8,0.2l-0.8,0.3l-0.8,0.3l-0.8,0.3l-0.8,0.3l-0.8,0.3l-0.8,0.3l-0.8,0.4l-0.8,0.4l-0.8,0.4l-0.8,0.4
                      l-0.8,0.4l-0.7,0.5l-0.7,0.4l-0.7,0.5l-0.7,0.5l-0.7,0.5l-0.7,0.5l-0.7,0.5l-0.7,0.6l-0.7,0.6l-0.6,0.6l-0.6,0.6l-0.6,0.6
                      l-0.6,0.6l-0.6,0.6l-0.6,0.6l-0.6,0.6l-0.5,0.7l-0.5,0.7l-0.5,0.7l-0.5,0.7l-0.5,0.7l-0.5,0.7l-0.4,0.7l-0.5,0.7l-0.4,0.7
                      l-0.4,0.8l-0.4,0.8l-0.4,0.8l-0.4,0.8l-0.3,0.8l-0.3,0.8l-0.3,0.8l-0.3,0.8l-0.3,0.8l-0.3,0.8l-0.2,0.8l-0.2,0.8l-0.2,0.8
                      l-0.2,0.8l-0.2,0.8l-0.2,0.8l-0.1,0.9l-0.1,0.8l-0.1,0.9l-0.1,0.8l-0.1,0.9l0,0.9l0,0.9v0.9v0.9l0,0.9l0,0.8l0.1,0.9l0.1,0.9
                      l0.1,0.8l0.1,0.8l0.1,0.8l0.2,0.8l0.2,0.8l0.2,0.8l0.2,0.8l0.2,0.8l0.2,0.8l0.3,0.8l0.3,0.8l0.3,0.8l0.3,0.8l0.3,0.8l0.3,0.8
                      l0.4,0.8l0.4,0.8l0.4,0.8l0.4,0.8l0.4,0.7l0.5,0.7l0.4,0.7l0.5,0.7l0.5,0.7l0.5,0.7l0.5,0.7l0.5,0.7l0.5,0.7l0.6,0.6l0.6,0.6
                      l0.6,0.6l0.6,0.6l0.6,0.6l0.6,0.6l0.6,0.6l0.7,0.6l0.6,0.5h0l1.1-0.7l0.8-0.5l0.8-0.5l0.8-0.4l0.8-0.4l0.9-0.4l0.9-0.4l0.9-0.4
                      l0.9-0.3l0.9-0.3l0.9-0.3l0.9-0.3l0.9-0.3l0.9-0.3l0.9-0.2l0.9-0.2l0.9-0.2l0.9-0.2l0.9-0.2l0.9-0.1l0.9-0.1l0.9-0.1l0.9-0.1
                      l0.9-0.1l0.9-0.1l0.9,0l0.9,0l0.9,0h57.5l-59.7-16.4l-0.4-0.1l-0.3-0.1l-0.4-0.1l-0.3-0.1l-0.3-0.2l-0.3-0.2l-0.3-0.2l-0.3-0.2
                      l-0.3-0.2l-0.3-0.2l-0.3-0.3l-0.2-0.3l-0.2-0.3l-0.2-0.3l-0.2-0.3l-0.2-0.3l-0.2-0.3l-0.2-0.3l-0.2-0.3l-0.1-0.3l-0.1-0.4
                      l-0.1-0.3l-0.1-0.4l-0.1-0.4l-0.1-0.4l0-0.4l0-0.4l0-0.4l0-0.4l0-0.4l0-0.4l0.1-0.4l0.1-0.4l0.1-0.4l0.1-0.4l0.1-0.4l0.1-0.3
                      l0.2-0.3l0.2-0.3l0.2-0.3l0.2-0.3l0.2-0.3l0.2-0.3l0.2-0.3l0.2-0.3l0.3-0.2l0.3-0.2l0.3-0.2l0.3-0.2l0.3-0.2l0.3-0.2l0.3-0.2
                      l0.3-0.2l0.4-0.1l0.3-0.1l0.4-0.1l0.4-0.1l0.4-0.1l0.4-0.1l0.4,0l0.4,0l0.4,0H375V125H165.3z"
              />
            </g>
          </g>
        </svg>
        Seqera
      </a>
    </li>
    <li class="md-nav__item">
      <a
        href="https://github.com/nextflow-io/training"
        target="_blank"
        rel="noopener"
        class="md-nav__link"
      >
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
          <path
            d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"
          ></path>
        </svg>
        Training on GitHub
      </a>
    </li>
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
    <a href="https://github.com/nextflow-io/training/edit/master/docs/hello_nextflow/08_hello_nf-test.md" title="Editer cette page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  


<h1 id="part-7-hello-nf-test">Part 7: Hello nf-test<a class="headerlink" href="#part-7-hello-nf-test" title="Permanent link">&para;</a></h1>
<p>Being able to systematically test that every part of your workflow is doing what it's supposed to do is critical for reproducibility and long-term maintenance.
And it's also helpful during the development process!</p>
<p>This is (hopefully) not controversial.
However, people often focus on setting up top-level tests, in which the workflow is run on some test data from start to finish.
This is useful, but unfortunately incomplete.
You should also implement tests at the level of each individual module (equivalent to what is called 'unit tests' in general software engineering) to verify the functionality of individual components of your workflow.
That will ensure that each module performs as expected under different conditions and inputs.
And it also means that when you assemble a new workflow from existing modules that already have tests, you get built-in testing for free!</p>
<p>In this part of the training, we're going to show you how to use <a href="https://www.nf-test.com/"><strong>nf-test</strong></a>, a testing framework that integrates well with Nextflow and makes it straightforward to add both module-level and workflow-level tests to your pipeline.
For more background information about nf-test, we recommend you read <a href="https://nextflow.io/blog/2024/nf-test-in-nf-core.html">this blog post</a>.</p>
<hr />
<h2 id="0-warmup">0. Warmup<a class="headerlink" href="#0-warmup" title="Permanent link">&para;</a></h2>
<p>We're going to add a few different types of tests to the three processes in our pipeline, as well as a workflow-level test.</p>
<p>Similarly to we did in Part 6 (Hello Modules), we're going to be working with a clean set of project files inside the project directory called <code>hello-nf-test</code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you haven't worked through the previous parts of this training course, you should consider doing so now to understand how the code is organized.
In a nutshell, this is a modularized pipeline; the processes are in local modules and the parameter declarations are in a configuration file.</p>
</div>
<h3 id="01-explore-the-hello-nf-test-directory">0.1. Explore the <code>hello-nf-test</code> directory<a class="headerlink" href="#01-explore-the-hello-nf-test-directory" title="Permanent link">&para;</a></h3>
<p>Let's move into the project directory.
If you're continuing on directly from Part 6, you'll need to move up one directory first.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nb">cd</span><span class="w"> </span>hello-nf-test
</code></pre></div>
<p>The <code>hello-nf-test</code> directory has the same content and structure that you're expected to end up with in <code>hello-modules</code> on completion of Part 6.</p>
<div class="highlight"><span class="filename">Directory contents</span><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="go">hello-nf-test/</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="go">âââ demo-params.json</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="go">âââ main.nf</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="go">âââ modules</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="go">âââ nextflow.config</span>
</code></pre></div>
<p>For a detailed description of the files, see the warmup section in Part 6.
For details about the contents of the <code>modules</code> directory, read through all of Part 6 (it's pretty short).</p>
<h3 id="02-create-a-symbolic-link-to-the-data">0.2. Create a symbolic link to the data<a class="headerlink" href="#02-create-a-symbolic-link-to-the-data" title="Permanent link">&para;</a></h3>
<p>Just like last time, we need to set up a symlink to the data.
To do so, run this command from inside the <code>hello-nf-test</code> directory:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>ln<span class="w"> </span>-s<span class="w"> </span>../data<span class="w"> </span>data
</code></pre></div>
<p>This creates a symbolic link called <code>data</code> pointing to the data directory one level up.</p>
<h3 id="03-run-the-workflow-using-the-appropriate-profiles">0.3 Run the workflow using the appropriate profiles<a class="headerlink" href="#03-run-the-workflow-using-the-appropriate-profiles" title="Permanent link">&para;</a></h3>
<p>Now that everything is in place, we should be able to run the workflow using the profiles we originally set up in Part 5 (Hello Config).</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>nextflow<span class="w"> </span>run<span class="w"> </span>main.nf<span class="w"> </span>-profile<span class="w"> </span>my_laptop,demo
</code></pre></div>
<p>This should look very familiar by now if you've been working through this training course from the start.</p>
<div class="highlight"><span class="filename">Output</span><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="go"> N E X T F L O W   ~  version 24.10.0</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="go"> â Launching `main.nf` [special_brenner] DSL2 - revision: 5a07b4894b</span>
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="go">executor &gt;  local (7)</span>
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="go">[26/60774a] SAMTOOLS_INDEX (1)       | 3 of 3 â</span>
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="go">[5a/eb40c4] GATK_HAPLOTYPECALLER (2) | 3 of 3 â</span>
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a><span class="go">[8f/94ac86] GATK_JOINTGENOTYPING     | 1 of 1 â</span>
</code></pre></div>
<p>As expected, it all worked.</p>
<p>Like previously, there will now be a <code>work</code> directory and a <code>results_genomics</code> directory inside your project directory.
However, we are going to ignore them entirely, because we are no longer going to touch the pipeline itself, and we're not even going to interact directly with Nextflow as such.</p>
<p>Instead, we are going to interact with the <code>nf-test</code> package.</p>
<h3 id="04-initialize-nf-test">0.4. Initialize <code>nf-test</code><a class="headerlink" href="#04-initialize-nf-test" title="Permanent link">&para;</a></h3>
<p>The <code>nf-test</code> package provides an initialization command that sets up a few things in order for us to start developing tests for our project.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>nf-test<span class="w"> </span>init
</code></pre></div>
<p>This should produce the following output:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>ð<span class="w"> </span>nf-test<span class="w"> </span><span class="m">0</span>.9.1
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>https://www.nf-test.com
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="o">(</span>c<span class="o">)</span><span class="w"> </span><span class="m">2021</span><span class="w"> </span>-<span class="w"> </span><span class="m">2024</span><span class="w"> </span>Lukas<span class="w"> </span>Forer<span class="w"> </span>and<span class="w"> </span>Sebastian<span class="w"> </span>Schoenherr
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>Project<span class="w"> </span>configured.<span class="w"> </span>Configuration<span class="w"> </span>is<span class="w"> </span>stored<span class="w"> </span><span class="k">in</span><span class="w"> </span>nf-test.config
</code></pre></div>
<p>It also creates a <code>tests</code> directory containing a configuration file stub.</p>
<h3 id="takeaway">Takeaway<a class="headerlink" href="#takeaway" title="Permanent link">&para;</a></h3>
<p>You know how to initialize <code>nf-test</code> in preparation for developing tests.</p>
<h3 id="whats-next">What's next?<a class="headerlink" href="#whats-next" title="Permanent link">&para;</a></h3>
<p>Learn how to write basic tests that evaluate whether the process calls were successful and produced the correct outputs.</p>
<hr />
<h2 id="1-test-a-process-for-success-and-matching-outputs">1. Test a process for success and matching outputs<a class="headerlink" href="#1-test-a-process-for-success-and-matching-outputs" title="Permanent link">&para;</a></h2>
<p>We're going to start by adding a test for the <code>SAMTOOLS_INDEX</code> process.
It's a very simple process that takes a single input file (for which we have test data on hand) and generates an index file.
We want to test that the process runs successfully and that the file it produces is always the same for a given input.</p>
<h3 id="11-generate-a-test-file-stub">1.1. Generate a test file stub<a class="headerlink" href="#11-generate-a-test-file-stub" title="Permanent link">&para;</a></h3>
<p>First, we use the <code>nf-test generate process</code> command to create a test file stub.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>nf-test<span class="w"> </span>generate<span class="w"> </span>process<span class="w"> </span>modules/local/samtools/index/main.nf
</code></pre></div>
<p>This creates a file in the same directory as <code>main.nf</code>, summarized in the terminal output as follows:</p>
<div class="highlight"><span class="filename">Output</span><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="go">Load source file &#39;/workspaces/training/hello-nextflow/hello-nf-test/modules/local/samtools/index/main.nf&#39;</span>
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="go">Wrote process test file &#39;/workspaces/training/hello-nextflow/tests/hello-nf-test/modules/local/samtools/index/main.nf.test</span>
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="go">SUCCESS: Generated 1 test files.</span>
</code></pre></div>
<p>You can navigate to the directory in the file explorer and open the file, which should contain the following code:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">tests/modules/local/samtools/index/main.nf.test</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-9-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-9-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-9-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-9-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-9-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-9-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-9-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-9-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-9-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-9-10">10</a></span>
<span class="normal"><a href="#__codelineno-9-11">11</a></span>
<span class="normal"><a href="#__codelineno-9-12">12</a></span>
<span class="normal"><a href="#__codelineno-9-13">13</a></span>
<span class="normal"><a href="#__codelineno-9-14">14</a></span>
<span class="normal"><a href="#__codelineno-9-15">15</a></span>
<span class="normal"><a href="#__codelineno-9-16">16</a></span>
<span class="normal"><a href="#__codelineno-9-17">17</a></span>
<span class="normal"><a href="#__codelineno-9-18">18</a></span>
<span class="normal"><a href="#__codelineno-9-19">19</a></span>
<span class="normal"><a href="#__codelineno-9-20">20</a></span>
<span class="normal"><a href="#__codelineno-9-21">21</a></span>
<span class="normal"><a href="#__codelineno-9-22">22</a></span>
<span class="normal"><a href="#__codelineno-9-23">23</a></span>
<span class="normal"><a href="#__codelineno-9-24">24</a></span>
<span class="normal"><a href="#__codelineno-9-25">25</a></span>
<span class="normal"><a href="#__codelineno-9-26">26</a></span>
<span class="normal"><a href="#__codelineno-9-27">27</a></span>
<span class="normal"><a href="#__codelineno-9-28">28</a></span>
<span class="normal"><a href="#__codelineno-9-29">29</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1"></a><span class="n">nextflow_process</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-9-2" name="__codelineno-9-2"></a>
<a id="__codelineno-9-3" name="__codelineno-9-3"></a><span class="w">    </span><span class="n">name</span><span class="w"> </span><span class="s2">&quot;Test Process SAMTOOLS_INDEX&quot;</span>
<a id="__codelineno-9-4" name="__codelineno-9-4"></a><span class="w">    </span><span class="n">script</span><span class="w"> </span><span class="s2">&quot;modules/local/samtools/index/main.nf&quot;</span>
<a id="__codelineno-9-5" name="__codelineno-9-5"></a><span class="w">    </span><span class="n">process</span><span class="w"> </span><span class="s2">&quot;SAMTOOLS_INDEX&quot;</span>
<a id="__codelineno-9-6" name="__codelineno-9-6"></a>
<a id="__codelineno-9-7" name="__codelineno-9-7"></a><span class="w">    </span><span class="n">test</span><span class="o">(</span><span class="s2">&quot;Should run without failures&quot;</span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-9-8" name="__codelineno-9-8"></a>
<a id="__codelineno-9-9" name="__codelineno-9-9"></a><span class="w">        </span><span class="n">when</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-9-10" name="__codelineno-9-10"></a><span class="w">            </span><span class="n">params</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-9-11" name="__codelineno-9-11"></a><span class="w">                </span><span class="c1">// define parameters here. Example:</span>
<a id="__codelineno-9-12" name="__codelineno-9-12"></a><span class="w">                </span><span class="c1">// outdir = &quot;tests/results&quot;</span>
<a id="__codelineno-9-13" name="__codelineno-9-13"></a><span class="w">            </span><span class="o">}</span>
<a id="__codelineno-9-14" name="__codelineno-9-14"></a><span class="w">            </span><span class="n">process</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-9-15" name="__codelineno-9-15"></a><span class="w">                </span><span class="s2">&quot;&quot;&quot;</span>
<a id="__codelineno-9-16" name="__codelineno-9-16"></a><span class="s2">                // define inputs of the process here. Example:</span>
<a id="__codelineno-9-17" name="__codelineno-9-17"></a><span class="s2">                // input[0] = file(&quot;test-file.txt&quot;)</span>
<a id="__codelineno-9-18" name="__codelineno-9-18"></a><span class="s2">                &quot;&quot;&quot;</span>
<a id="__codelineno-9-19" name="__codelineno-9-19"></a><span class="w">            </span><span class="o">}</span>
<a id="__codelineno-9-20" name="__codelineno-9-20"></a><span class="w">        </span><span class="o">}</span>
<a id="__codelineno-9-21" name="__codelineno-9-21"></a>
<a id="__codelineno-9-22" name="__codelineno-9-22"></a><span class="w">        </span><span class="n">then</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-9-23" name="__codelineno-9-23"></a><span class="w">            </span><span class="k">assert</span><span class="w"> </span><span class="n">process</span><span class="o">.</span><span class="na">success</span>
<a id="__codelineno-9-24" name="__codelineno-9-24"></a><span class="w">            </span><span class="k">assert</span><span class="w"> </span><span class="n">snapshot</span><span class="o">(</span><span class="n">process</span><span class="o">.</span><span class="na">out</span><span class="o">).</span><span class="na">match</span><span class="o">()</span>
<a id="__codelineno-9-25" name="__codelineno-9-25"></a><span class="w">        </span><span class="o">}</span>
<a id="__codelineno-9-26" name="__codelineno-9-26"></a>
<a id="__codelineno-9-27" name="__codelineno-9-27"></a><span class="w">    </span><span class="o">}</span>
<a id="__codelineno-9-28" name="__codelineno-9-28"></a>
<a id="__codelineno-9-29" name="__codelineno-9-29"></a><span class="o">}</span>
</code></pre></div></td></tr></table></div>
<p>In plain English, the logic of the test reads as follows:
"<strong>When</strong> these <em>parameters</em> are provided to this <em>process</em>, <strong>then</strong> we expect to see these results."</p>
<p>The expected results are formulated as <code>assert</code> statements.</p>
<ul>
<li><code>assert process.success</code> states that we expect the process to run successfully and complete without any failures.</li>
<li><code>snapshot(process.out).match()</code> states that we expect the result of the run to be identical to the result obtained in a previous run (if applicable).
  We discuss this in more detail later.</li>
</ul>
<p>For most real-world modules (which usually require some kind of input), this is not yet a functional test.
We need to add the inputs that will be fed to the process, and any parameters if applicable.</p>
<h3 id="12-move-the-test-file-and-update-the-script-path">1.2. Move the test file and update the script path<a class="headerlink" href="#12-move-the-test-file-and-update-the-script-path" title="Permanent link">&para;</a></h3>
<p>Before we get to work on filling out the test, we need to move the file to its definitive location.
The preferred convention is to ship tests in a <code>tests</code> directory co-located with each module's <code>main.nf</code> file, so we create a <code>tests/</code> directory in the module's directory:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>mkdir<span class="w"> </span>-p<span class="w"> </span>modules/local/samtools/index/tests
</code></pre></div>
<p>Then we move the test file there:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>mv<span class="w"> </span>tests/modules/local/samtools/index/main.nf.test<span class="w"> </span>modules/local/samtools/index/tests/
</code></pre></div>
<p>As a result, we can update the full path in the <code>script</code> section of the test file to a relative path:</p>
<p><em>Before:</em></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">modules/local/samtools/index/tests/main.nf.test</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-12-3">3</a></span>
<span class="normal"><a href="#__codelineno-12-4">4</a></span>
<span class="normal"><a href="#__codelineno-12-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-12-3" name="__codelineno-12-3"></a><span class="n">name</span><span class="w"> </span><span class="s2">&quot;Test Process SAMTOOLS_INDEX&quot;</span>
<a id="__codelineno-12-4" name="__codelineno-12-4"></a><span class="n">script</span><span class="w"> </span><span class="s2">&quot;modules/local/samtools/index/main.nf&quot;</span>
<a id="__codelineno-12-5" name="__codelineno-12-5"></a><span class="n">process</span><span class="w"> </span><span class="s2">&quot;SAMTOOLS_INDEX&quot;</span>
</code></pre></div></td></tr></table></div>
<p><em>After:</em></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">modules/local/samtools/index/tests/main.nf.test</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-13-3">3</a></span>
<span class="normal"><a href="#__codelineno-13-4">4</a></span>
<span class="normal"><a href="#__codelineno-13-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-13-3" name="__codelineno-13-3"></a><span class="n">name</span><span class="w"> </span><span class="s2">&quot;Test Process SAMTOOLS_INDEX&quot;</span>
<a id="__codelineno-13-4" name="__codelineno-13-4"></a><span class="n">script</span><span class="w"> </span><span class="s2">&quot;../main.nf&quot;</span>
<a id="__codelineno-13-5" name="__codelineno-13-5"></a><span class="n">process</span><span class="w"> </span><span class="s2">&quot;SAMTOOLS_INDEX&quot;</span>
</code></pre></div></td></tr></table></div>
<h3 id="13-provide-inputs-to-the-test-process">1.3. Provide inputs to the test process<a class="headerlink" href="#13-provide-inputs-to-the-test-process" title="Permanent link">&para;</a></h3>
<p>The stub file includes a placeholder that we need to replace with an actual test input:</p>
<p><em>Before:</em></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">modules/local/samtools/index/tests/main.nf.test</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-14-14">14</a></span>
<span class="normal"><a href="#__codelineno-14-15">15</a></span>
<span class="normal"><a href="#__codelineno-14-16">16</a></span>
<span class="normal"><a href="#__codelineno-14-17">17</a></span>
<span class="normal"><a href="#__codelineno-14-18">18</a></span>
<span class="normal"><a href="#__codelineno-14-19">19</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-14-14" name="__codelineno-14-14"></a><span class="n">process</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-14-15" name="__codelineno-14-15"></a><span class="w">    </span><span class="s2">&quot;&quot;&quot;</span>
<a id="__codelineno-14-16" name="__codelineno-14-16"></a><span class="s2">    // define inputs of the process here. Example:</span>
<a id="__codelineno-14-17" name="__codelineno-14-17"></a><span class="s2">    // input[0] = file(&quot;test-file.txt&quot;)</span>
<a id="__codelineno-14-18" name="__codelineno-14-18"></a><span class="s2">    &quot;&quot;&quot;</span>
<a id="__codelineno-14-19" name="__codelineno-14-19"></a><span class="o">}</span>
</code></pre></div></td></tr></table></div>
<p>We choose one of our available data files and plug it into the <code>process</code> block:</p>
<p><em>After:</em></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">modules/local/samtools/index/tests/main.nf.test</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-15-14">14</a></span>
<span class="normal"><a href="#__codelineno-15-15">15</a></span>
<span class="normal"><a href="#__codelineno-15-16">16</a></span>
<span class="normal"><a href="#__codelineno-15-17">17</a></span>
<span class="normal"><a href="#__codelineno-15-18">18</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-15-14" name="__codelineno-15-14"></a><span class="n">process</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-15-15" name="__codelineno-15-15"></a><span class="w">    </span><span class="s2">&quot;&quot;&quot;</span>
<a id="__codelineno-15-16" name="__codelineno-15-16"></a><span class="s2">    input[0] = file(&quot;${projectDir}/data/bam/reads_son.bam&quot;)</span>
<a id="__codelineno-15-17" name="__codelineno-15-17"></a><span class="s2">    &quot;&quot;&quot;</span>
<a id="__codelineno-15-18" name="__codelineno-15-18"></a><span class="o">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="14-rename-the-test-based-on-the-primary-test-input">1.4. Rename the test based on the primary test input<a class="headerlink" href="#14-rename-the-test-based-on-the-primary-test-input" title="Permanent link">&para;</a></h3>
<p>The stub file gives the test a generic name referring to the assertion that it should run without failures.
Since we added a specific input, it's good practice to rename the test accordingly.</p>
<p><em>Before:</em></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">modules/local/samtools/index/tests/main.nf.test</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-16-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-16-7" name="__codelineno-16-7"></a><span class="n">test</span><span class="o">(</span><span class="s2">&quot;Should run without failures&quot;</span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
</code></pre></div></td></tr></table></div>
<p>This takes an arbitrary string, so we could put anything we want.
Here we choose to refer to the file name and its format:</p>
<p><em>After:</em></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">modules/local/samtools/index/tests/main.nf.test</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-17-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-17-7" name="__codelineno-17-7"></a><span class="n">test</span><span class="o">(</span><span class="s2">&quot;reads_son [bam]&quot;</span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
</code></pre></div></td></tr></table></div>
<h3 id="15-specify-test-parameters">1.5. Specify test parameters<a class="headerlink" href="#15-specify-test-parameters" title="Permanent link">&para;</a></h3>
<p>The <code>params</code> block in the stub file includes a placeholder for parameters:</p>
<p><em>Before:</em></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">modules/local/samtools/index/tests/main.nf.test</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-18-11">11</a></span>
<span class="normal"><a href="#__codelineno-18-12">12</a></span>
<span class="normal"><a href="#__codelineno-18-13">13</a></span>
<span class="normal"><a href="#__codelineno-18-14">14</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-18-11" name="__codelineno-18-11"></a><span class="n">params</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-18-12" name="__codelineno-18-12"></a><span class="w">    </span><span class="c1">// define parameters here. Example:</span>
<a id="__codelineno-18-13" name="__codelineno-18-13"></a><span class="w">    </span><span class="c1">// outdir = &quot;tests/results&quot;</span>
<a id="__codelineno-18-14" name="__codelineno-18-14"></a><span class="o">}</span>
</code></pre></div></td></tr></table></div>
<p>We use it to specify a location for the results to be output, using the default suggestion:</p>
<p><em>After:</em></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">modules/local/samtools/index/tests/main.nf.test</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-19-11">11</a></span>
<span class="normal"><a href="#__codelineno-19-12">12</a></span>
<span class="normal"><a href="#__codelineno-19-13">13</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-19-11" name="__codelineno-19-11"></a><span class="n">params</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-19-12" name="__codelineno-19-12"></a><span class="w">    </span><span class="n">outdir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;tests/results&quot;</span>
<a id="__codelineno-19-13" name="__codelineno-19-13"></a><span class="o">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="16-run-the-test-and-examine-the-output">1.6. Run the test and examine the output<a class="headerlink" href="#16-run-the-test-and-examine-the-output" title="Permanent link">&para;</a></h3>
<p>Finally, it's time to run our test! Let's break down the syntax.</p>
<ul>
<li>The basic command is <code>nf-test test</code>.</li>
<li>To that, we add <code>--profile docker_on</code> to specify that we want Nextflow to run the test with Docker enabled.</li>
<li>Then the test file that we want to run.</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code>--profile</code> parameter is technically optional in the sense that nf-test does not require it.
There is a <code>nextflow.config</code> file in the <code>nf-test</code> directory where we could write <code>docker.enable = on</code> to have Docker enabled by default.
However, it's good practice to test your modules explicitly (and separately) with every packaging system they support.
This allows you to detect issues that might arise when the module no longer works with Docker but still works with Conda, for example.</p>
<p>Note also the TWO dashes, <code>--</code>, because here it's a parameter of the <code>nf-test test</code> command, which passes the instruction on to Nextflow itself.</p>
</div>
<p>All put together, it looks like this:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a>nf-test<span class="w"> </span><span class="nb">test</span><span class="w"> </span>--profile<span class="w"> </span>docker_on<span class="w"> </span>modules/local/samtools/index/tests/main.nf.test
</code></pre></div>
<p>This should produce the following output:</p>
<div class="highlight"><span class="filename">Output</span><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="go">ð nf-test 0.9.1</span>
<a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a><span class="go">https://www.nf-test.com</span>
<a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a><span class="gp gp-VirtualEnv">(c)</span> <span class="go">2021 - 2024 Lukas Forer and Sebastian Schoenherr</span>
<a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a>
<a id="__codelineno-21-5" name="__codelineno-21-5" href="#__codelineno-21-5"></a>
<a id="__codelineno-21-6" name="__codelineno-21-6" href="#__codelineno-21-6"></a><span class="go">Test Process SAMTOOLS_INDEX</span>
<a id="__codelineno-21-7" name="__codelineno-21-7" href="#__codelineno-21-7"></a>
<a id="__codelineno-21-8" name="__codelineno-21-8" href="#__codelineno-21-8"></a><span class="go">  Test [f2eed6af] &#39;reads_son [bam]&#39; PASSED (9.01s)</span>
<a id="__codelineno-21-9" name="__codelineno-21-9" href="#__codelineno-21-9"></a><span class="go">  Snapshots:</span>
<a id="__codelineno-21-10" name="__codelineno-21-10" href="#__codelineno-21-10"></a><span class="go">    1 created [reads_son [bam]]</span>
<a id="__codelineno-21-11" name="__codelineno-21-11" href="#__codelineno-21-11"></a>
<a id="__codelineno-21-12" name="__codelineno-21-12" href="#__codelineno-21-12"></a>
<a id="__codelineno-21-13" name="__codelineno-21-13" href="#__codelineno-21-13"></a><span class="go">Snapshot Summary:</span>
<a id="__codelineno-21-14" name="__codelineno-21-14" href="#__codelineno-21-14"></a><span class="go">  1 created</span>
<a id="__codelineno-21-15" name="__codelineno-21-15" href="#__codelineno-21-15"></a>
<a id="__codelineno-21-16" name="__codelineno-21-16" href="#__codelineno-21-16"></a><span class="go">SUCCESS: Executed 1 tests in 9.062s</span>
</code></pre></div>
<p>The test verified the first assertion, that the process should complete successfully.</p>
<p>Additionally, this also produces a snapshot file called <code>main.nf.test.snap</code> that captures all the output channels and the MD5SUMs of all elements.</p>
<p>If we re-run the test, the program will check that the new output matches the output that was originally recorded.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>That means we have to be sure that the output we record in the original run is correct!</p>
</div>
<p>If, in the course of future development, something in the code changes that causes the output to be different, the test will fail and we will have to determine whether the change is expected or not.</p>
<ul>
<li>If it turns out that something in the code broke, we will have to fix it, with the expectation that the fixed code will pass the test.</li>
<li>If it is an expected change (e.g., the tool has been improved and the results are better) then we will need to update the snapshot to accept the new output as the reference to match, using the parameter <code>--update-snapshot</code> when we run the test command.</li>
</ul>
<h3 id="17-add-more-tests-to-samtools_index">1.7. Add more tests to <code>SAMTOOLS_INDEX</code><a class="headerlink" href="#17-add-more-tests-to-samtools_index" title="Permanent link">&para;</a></h3>
<p>Sometimes it's useful to test a range of different input files to ensure we're testing for a variety of potential issues.</p>
<p>We can add as many tests as we want inside the same test file for a module.</p>
<p>Try adding the following tests to the module's test file:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">modules/local/samtools/index/tests/main.nf.test</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-22-27">27</a></span>
<span class="normal"><a href="#__codelineno-22-28">28</a></span>
<span class="normal"><a href="#__codelineno-22-29">29</a></span>
<span class="normal"><a href="#__codelineno-22-30">30</a></span>
<span class="normal"><a href="#__codelineno-22-31">31</a></span>
<span class="normal"><a href="#__codelineno-22-32">32</a></span>
<span class="normal"><a href="#__codelineno-22-33">33</a></span>
<span class="normal"><a href="#__codelineno-22-34">34</a></span>
<span class="normal"><a href="#__codelineno-22-35">35</a></span>
<span class="normal"><a href="#__codelineno-22-36">36</a></span>
<span class="normal"><a href="#__codelineno-22-37">37</a></span>
<span class="normal"><a href="#__codelineno-22-38">38</a></span>
<span class="normal"><a href="#__codelineno-22-39">39</a></span>
<span class="normal"><a href="#__codelineno-22-40">40</a></span>
<span class="normal"><a href="#__codelineno-22-41">41</a></span>
<span class="normal"><a href="#__codelineno-22-42">42</a></span>
<span class="normal"><a href="#__codelineno-22-43">43</a></span>
<span class="normal"><a href="#__codelineno-22-44">44</a></span>
<span class="normal"><a href="#__codelineno-22-45">45</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-22-27" name="__codelineno-22-27"></a><span class="n">test</span><span class="o">(</span><span class="s2">&quot;reads_mother [bam]&quot;</span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-22-28" name="__codelineno-22-28"></a>
<a id="__codelineno-22-29" name="__codelineno-22-29"></a><span class="w">    </span><span class="n">when</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-22-30" name="__codelineno-22-30"></a><span class="w">        </span><span class="n">params</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-22-31" name="__codelineno-22-31"></a><span class="w">            </span><span class="n">outdir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;tests/results&quot;</span>
<a id="__codelineno-22-32" name="__codelineno-22-32"></a><span class="w">        </span><span class="o">}</span>
<a id="__codelineno-22-33" name="__codelineno-22-33"></a><span class="w">        </span><span class="n">process</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-22-34" name="__codelineno-22-34"></a><span class="w">            </span><span class="s2">&quot;&quot;&quot;</span>
<a id="__codelineno-22-35" name="__codelineno-22-35"></a><span class="s2">            input[0] = file(&quot;${projectDir}/data/bam/reads_mother.bam&quot;)</span>
<a id="__codelineno-22-36" name="__codelineno-22-36"></a><span class="s2">            &quot;&quot;&quot;</span>
<a id="__codelineno-22-37" name="__codelineno-22-37"></a><span class="w">        </span><span class="o">}</span>
<a id="__codelineno-22-38" name="__codelineno-22-38"></a><span class="w">    </span><span class="o">}</span>
<a id="__codelineno-22-39" name="__codelineno-22-39"></a>
<a id="__codelineno-22-40" name="__codelineno-22-40"></a><span class="w">    </span><span class="n">then</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-22-41" name="__codelineno-22-41"></a><span class="w">        </span><span class="k">assert</span><span class="w"> </span><span class="n">process</span><span class="o">.</span><span class="na">success</span>
<a id="__codelineno-22-42" name="__codelineno-22-42"></a><span class="w">        </span><span class="k">assert</span><span class="w"> </span><span class="n">snapshot</span><span class="o">(</span><span class="n">process</span><span class="o">.</span><span class="na">out</span><span class="o">).</span><span class="na">match</span><span class="o">()</span>
<a id="__codelineno-22-43" name="__codelineno-22-43"></a><span class="w">    </span><span class="o">}</span>
<a id="__codelineno-22-44" name="__codelineno-22-44"></a>
<a id="__codelineno-22-45" name="__codelineno-22-45"></a><span class="o">}</span>
</code></pre></div></td></tr></table></div>
<p>And:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">modules/local/samtools/index/tests/main.nf.test</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-23-47">47</a></span>
<span class="normal"><a href="#__codelineno-23-48">48</a></span>
<span class="normal"><a href="#__codelineno-23-49">49</a></span>
<span class="normal"><a href="#__codelineno-23-50">50</a></span>
<span class="normal"><a href="#__codelineno-23-51">51</a></span>
<span class="normal"><a href="#__codelineno-23-52">52</a></span>
<span class="normal"><a href="#__codelineno-23-53">53</a></span>
<span class="normal"><a href="#__codelineno-23-54">54</a></span>
<span class="normal"><a href="#__codelineno-23-55">55</a></span>
<span class="normal"><a href="#__codelineno-23-56">56</a></span>
<span class="normal"><a href="#__codelineno-23-57">57</a></span>
<span class="normal"><a href="#__codelineno-23-58">58</a></span>
<span class="normal"><a href="#__codelineno-23-59">59</a></span>
<span class="normal"><a href="#__codelineno-23-60">60</a></span>
<span class="normal"><a href="#__codelineno-23-61">61</a></span>
<span class="normal"><a href="#__codelineno-23-62">62</a></span>
<span class="normal"><a href="#__codelineno-23-63">63</a></span>
<span class="normal"><a href="#__codelineno-23-64">64</a></span>
<span class="normal"><a href="#__codelineno-23-65">65</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-23-47" name="__codelineno-23-47"></a><span class="n">test</span><span class="o">(</span><span class="s2">&quot;reads_father [bam]&quot;</span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-23-48" name="__codelineno-23-48"></a>
<a id="__codelineno-23-49" name="__codelineno-23-49"></a><span class="w">    </span><span class="n">when</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-23-50" name="__codelineno-23-50"></a><span class="w">        </span><span class="n">params</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-23-51" name="__codelineno-23-51"></a><span class="w">            </span><span class="n">outdir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;tests/results&quot;</span>
<a id="__codelineno-23-52" name="__codelineno-23-52"></a><span class="w">        </span><span class="o">}</span>
<a id="__codelineno-23-53" name="__codelineno-23-53"></a><span class="w">        </span><span class="n">process</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-23-54" name="__codelineno-23-54"></a><span class="w">            </span><span class="s2">&quot;&quot;&quot;</span>
<a id="__codelineno-23-55" name="__codelineno-23-55"></a><span class="s2">            input[0] = file(&quot;${projectDir}/data/bam/reads_father.bam&quot;)</span>
<a id="__codelineno-23-56" name="__codelineno-23-56"></a><span class="s2">            &quot;&quot;&quot;</span>
<a id="__codelineno-23-57" name="__codelineno-23-57"></a><span class="w">        </span><span class="o">}</span>
<a id="__codelineno-23-58" name="__codelineno-23-58"></a><span class="w">    </span><span class="o">}</span>
<a id="__codelineno-23-59" name="__codelineno-23-59"></a>
<a id="__codelineno-23-60" name="__codelineno-23-60"></a><span class="w">    </span><span class="n">then</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-23-61" name="__codelineno-23-61"></a><span class="w">        </span><span class="k">assert</span><span class="w"> </span><span class="n">process</span><span class="o">.</span><span class="na">success</span>
<a id="__codelineno-23-62" name="__codelineno-23-62"></a><span class="w">        </span><span class="k">assert</span><span class="w"> </span><span class="n">snapshot</span><span class="o">(</span><span class="n">process</span><span class="o">.</span><span class="na">out</span><span class="o">).</span><span class="na">match</span><span class="o">()</span>
<a id="__codelineno-23-63" name="__codelineno-23-63"></a><span class="w">    </span><span class="o">}</span>
<a id="__codelineno-23-64" name="__codelineno-23-64"></a>
<a id="__codelineno-23-65" name="__codelineno-23-65"></a><span class="o">}</span>
</code></pre></div></td></tr></table></div>
<p>These simply go one after another in the test file.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Watch out for those curly braces, make sure they're all paired up appropriately...</p>
</div>
<h3 id="18-run-the-test-suite-and-update-the-snapshot">1.8. Run the test suite and update the snapshot<a class="headerlink" href="#18-run-the-test-suite-and-update-the-snapshot" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a>nf-test<span class="w"> </span><span class="nb">test</span><span class="w"> </span>--profile<span class="w"> </span>docker_on<span class="w"> </span>modules/local/samtools/index/tests/main.nf.test<span class="w"> </span>--update-snapshot
</code></pre></div>
<p>This should produce the following output:</p>
<div class="highlight"><span class="filename">Output</span><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a><span class="go">ð nf-test 0.9.1</span>
<a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a><span class="go">https://www.nf-test.com</span>
<a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a><span class="gp gp-VirtualEnv">(c)</span> <span class="go">2021 - 2024 Lukas Forer and Sebastian Schoenherr</span>
<a id="__codelineno-25-4" name="__codelineno-25-4" href="#__codelineno-25-4"></a>
<a id="__codelineno-25-5" name="__codelineno-25-5" href="#__codelineno-25-5"></a><span class="go">Warning: every snapshot that fails during this test run is re-record.</span>
<a id="__codelineno-25-6" name="__codelineno-25-6" href="#__codelineno-25-6"></a>
<a id="__codelineno-25-7" name="__codelineno-25-7" href="#__codelineno-25-7"></a><span class="go">Test Process SAMTOOLS_INDEX</span>
<a id="__codelineno-25-8" name="__codelineno-25-8" href="#__codelineno-25-8"></a>
<a id="__codelineno-25-9" name="__codelineno-25-9" href="#__codelineno-25-9"></a><span class="go">  Test [bc664c47] &#39;reads_son [bam]&#39; PASSED (9.6s)</span>
<a id="__codelineno-25-10" name="__codelineno-25-10" href="#__codelineno-25-10"></a><span class="go">  Test [f413ec92] &#39;reads_mother [bam]&#39; PASSED (9.138s)</span>
<a id="__codelineno-25-11" name="__codelineno-25-11" href="#__codelineno-25-11"></a><span class="go">  Test [99a73481] &#39;reads_father [bam]&#39; PASSED (9.536s)</span>
<a id="__codelineno-25-12" name="__codelineno-25-12" href="#__codelineno-25-12"></a>
<a id="__codelineno-25-13" name="__codelineno-25-13" href="#__codelineno-25-13"></a>
<a id="__codelineno-25-14" name="__codelineno-25-14" href="#__codelineno-25-14"></a><span class="go">SUCCESS: Executed 3 tests in 28.281s</span>
</code></pre></div>
<p>Notice the warning, referring to the effect of the <code>--update-snapshot</code> parameter.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Here we are using test data that we used previously to demonstrate the scientific outputs of the pipeline.
If we had been planning to operate these tests in a production environment, we would have generated smaller inputs for testing purposes.</p>
<p>In general it's important to keep unit tests as light as possible by using the smallest pieces of data necessary and sufficient for evaluating process functionality, otherwise the total runtime can add up quite seriously.
A test suite that takes too long to run regularly is a test suite that's likely to get skipped in the interest of expediency.</p>
</div>
<h3 id="takeaway_1">Takeaway<a class="headerlink" href="#takeaway_1" title="Permanent link">&para;</a></h3>
<p>You know how to write basic tests that evaluate success and whether outputs match reference outputs exactly.</p>
<h3 id="whats-next_1">What's next?<a class="headerlink" href="#whats-next_1" title="Permanent link">&para;</a></h3>
<p>Learn how to write tests for chained processes, and to evaluate whether outputs contain specific lines.</p>
<hr />
<h2 id="2-add-tests-to-a-chained-process-and-test-for-contents">2. Add tests to a chained process and test for contents<a class="headerlink" href="#2-add-tests-to-a-chained-process-and-test-for-contents" title="Permanent link">&para;</a></h2>
<p>Now that we know how to handle the simplest case, we're going to kick things up a notch with the <code>GATK_HAPLOTYPECALLER</code> process.</p>
<p>As the second step in our pipeline, its input depends on the output of another process.
We can deal with this in two ways:</p>
<ul>
<li>Manually generate some static test data that is suitable as intermediate input to the process;</li>
<li>Use a special <a href="https://www.nf-test.com/docs/testcases/setup/">setup method</a> to handle it dynamically for us.</li>
</ul>
<p><strong>Spoiler:</strong> We're going to use the setup method.</p>
<h3 id="21-generate-the-test-file-stub">2.1. Generate the test file stub<a class="headerlink" href="#21-generate-the-test-file-stub" title="Permanent link">&para;</a></h3>
<p>As previously, first we generate the file stub:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a>nf-test<span class="w"> </span>generate<span class="w"> </span>process<span class="w"> </span>modules/local/gatk/haplotypecaller/main.nf
</code></pre></div>
<p>This produces the following test stub:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">tests/modules/local/gatk/haplotypecaller/main.nf.test</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-27-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-27-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-27-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-27-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-27-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-27-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-27-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-27-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-27-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-27-10">10</a></span>
<span class="normal"><a href="#__codelineno-27-11">11</a></span>
<span class="normal"><a href="#__codelineno-27-12">12</a></span>
<span class="normal"><a href="#__codelineno-27-13">13</a></span>
<span class="normal"><a href="#__codelineno-27-14">14</a></span>
<span class="normal"><a href="#__codelineno-27-15">15</a></span>
<span class="normal"><a href="#__codelineno-27-16">16</a></span>
<span class="normal"><a href="#__codelineno-27-17">17</a></span>
<span class="normal"><a href="#__codelineno-27-18">18</a></span>
<span class="normal"><a href="#__codelineno-27-19">19</a></span>
<span class="normal"><a href="#__codelineno-27-20">20</a></span>
<span class="normal"><a href="#__codelineno-27-21">21</a></span>
<span class="normal"><a href="#__codelineno-27-22">22</a></span>
<span class="normal"><a href="#__codelineno-27-23">23</a></span>
<span class="normal"><a href="#__codelineno-27-24">24</a></span>
<span class="normal"><a href="#__codelineno-27-25">25</a></span>
<span class="normal"><a href="#__codelineno-27-26">26</a></span>
<span class="normal"><a href="#__codelineno-27-27">27</a></span>
<span class="normal"><a href="#__codelineno-27-28">28</a></span>
<span class="normal"><a href="#__codelineno-27-29">29</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1"></a><span class="n">nextflow_process</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-27-2" name="__codelineno-27-2"></a>
<a id="__codelineno-27-3" name="__codelineno-27-3"></a><span class="w">    </span><span class="n">name</span><span class="w"> </span><span class="s2">&quot;Test Process GATK_HAPLOTYPECALLER&quot;</span>
<a id="__codelineno-27-4" name="__codelineno-27-4"></a><span class="w">    </span><span class="n">script</span><span class="w"> </span><span class="s2">&quot;modules/local/gatk/haplotypecaller/main.nf&quot;</span>
<a id="__codelineno-27-5" name="__codelineno-27-5"></a><span class="w">    </span><span class="n">process</span><span class="w"> </span><span class="s2">&quot;GATK_HAPLOTYPECALLER&quot;</span>
<a id="__codelineno-27-6" name="__codelineno-27-6"></a>
<a id="__codelineno-27-7" name="__codelineno-27-7"></a><span class="w">    </span><span class="n">test</span><span class="o">(</span><span class="s2">&quot;Should run without failures&quot;</span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-27-8" name="__codelineno-27-8"></a>
<a id="__codelineno-27-9" name="__codelineno-27-9"></a><span class="w">        </span><span class="n">when</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-27-10" name="__codelineno-27-10"></a><span class="w">            </span><span class="n">params</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-27-11" name="__codelineno-27-11"></a><span class="w">                </span><span class="c1">// define parameters here. Example:</span>
<a id="__codelineno-27-12" name="__codelineno-27-12"></a><span class="w">                </span><span class="c1">// outdir = &quot;tests/results&quot;</span>
<a id="__codelineno-27-13" name="__codelineno-27-13"></a><span class="w">            </span><span class="o">}</span>
<a id="__codelineno-27-14" name="__codelineno-27-14"></a><span class="w">            </span><span class="n">process</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-27-15" name="__codelineno-27-15"></a><span class="w">                </span><span class="s2">&quot;&quot;&quot;</span>
<a id="__codelineno-27-16" name="__codelineno-27-16"></a><span class="s2">                // define inputs of the process here. Example:</span>
<a id="__codelineno-27-17" name="__codelineno-27-17"></a><span class="s2">                // input[0] = file(&quot;test-file.txt&quot;)</span>
<a id="__codelineno-27-18" name="__codelineno-27-18"></a><span class="s2">                &quot;&quot;&quot;</span>
<a id="__codelineno-27-19" name="__codelineno-27-19"></a><span class="w">            </span><span class="o">}</span>
<a id="__codelineno-27-20" name="__codelineno-27-20"></a><span class="w">        </span><span class="o">}</span>
<a id="__codelineno-27-21" name="__codelineno-27-21"></a>
<a id="__codelineno-27-22" name="__codelineno-27-22"></a><span class="w">        </span><span class="n">then</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-27-23" name="__codelineno-27-23"></a><span class="w">            </span><span class="k">assert</span><span class="w"> </span><span class="n">process</span><span class="o">.</span><span class="na">success</span>
<a id="__codelineno-27-24" name="__codelineno-27-24"></a><span class="w">            </span><span class="k">assert</span><span class="w"> </span><span class="n">snapshot</span><span class="o">(</span><span class="n">process</span><span class="o">.</span><span class="na">out</span><span class="o">).</span><span class="na">match</span><span class="o">()</span>
<a id="__codelineno-27-25" name="__codelineno-27-25"></a><span class="w">        </span><span class="o">}</span>
<a id="__codelineno-27-26" name="__codelineno-27-26"></a>
<a id="__codelineno-27-27" name="__codelineno-27-27"></a><span class="w">    </span><span class="o">}</span>
<a id="__codelineno-27-28" name="__codelineno-27-28"></a>
<a id="__codelineno-27-29" name="__codelineno-27-29"></a><span class="o">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="22-move-the-test-file-and-update-the-script-path">2.2. Move the test file and update the script path<a class="headerlink" href="#22-move-the-test-file-and-update-the-script-path" title="Permanent link">&para;</a></h3>
<p>We create a directory for the test file co-located with the module's <code>main.nf</code> file:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a>mkdir<span class="w"> </span>-p<span class="w"> </span>modules/local/gatk/haplotypecaller/tests
</code></pre></div>
<p>And move the test stub file there:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a>mv<span class="w"> </span>tests/modules/local/gatk/haplotypecaller/main.nf.test<span class="w"> </span>modules/local/gatk/haplotypecaller/tests/
</code></pre></div>
<p>Finally, don't forget to update the script path:</p>
<p><em>Before:</em></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">modules/local/gatk/haplotypecaller/tests/main.nf.test</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-30-3">3</a></span>
<span class="normal"><a href="#__codelineno-30-4">4</a></span>
<span class="normal"><a href="#__codelineno-30-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-30-3" name="__codelineno-30-3"></a><span class="n">name</span><span class="w"> </span><span class="s2">&quot;Test Process GATK_HAPLOTYPECALLER&quot;</span>
<a id="__codelineno-30-4" name="__codelineno-30-4"></a><span class="n">script</span><span class="w"> </span><span class="s2">&quot;modules/local/gatk/haplotypecaller/main.nf&quot;</span>
<a id="__codelineno-30-5" name="__codelineno-30-5"></a><span class="n">process</span><span class="w"> </span><span class="s2">&quot;GATK_HAPLOTYPECALLER&quot;</span>
</code></pre></div></td></tr></table></div>
<p><em>After:</em></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">modules/local/gatk/haplotypecaller/tests/main.nf.test</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-31-3">3</a></span>
<span class="normal"><a href="#__codelineno-31-4">4</a></span>
<span class="normal"><a href="#__codelineno-31-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-31-3" name="__codelineno-31-3"></a><span class="n">name</span><span class="w"> </span><span class="s2">&quot;Test Process GATK_HAPLOTYPECALLER&quot;</span>
<a id="__codelineno-31-4" name="__codelineno-31-4"></a><span class="n">script</span><span class="w"> </span><span class="s2">&quot;../main.nf&quot;</span>
<a id="__codelineno-31-5" name="__codelineno-31-5"></a><span class="n">process</span><span class="w"> </span><span class="s2">&quot;GATK_HAPLOTYPECALLER&quot;</span>
</code></pre></div></td></tr></table></div>
<h3 id="23-provide-inputs-using-the-setup-method">2.3. Provide inputs using the setup method<a class="headerlink" href="#23-provide-inputs-using-the-setup-method" title="Permanent link">&para;</a></h3>
<p>We insert a <code>setup</code> block before the <code>when</code> block, where we can trigger a run of the <code>SAMTOOLS_INDEX</code> process on one of our original input files.</p>
<p><em>Before:</em></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">modules/local/gatk/haplotypecaller/tests/main.nf.test</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-32-7">7</a></span>
<span class="normal"><a href="#__codelineno-32-8">8</a></span>
<span class="normal"><a href="#__codelineno-32-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-32-7" name="__codelineno-32-7"></a><span class="n">test</span><span class="o">(</span><span class="s2">&quot;Should run without failures&quot;</span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-32-8" name="__codelineno-32-8"></a>
<a id="__codelineno-32-9" name="__codelineno-32-9"></a><span class="w">    </span><span class="n">when</span><span class="w"> </span><span class="o">{</span>
</code></pre></div></td></tr></table></div>
<p><em>After:</em></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">modules/local/gatk/haplotypecaller/tests/main.nf.test</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-33-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-33-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-33-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-33-10">10</a></span>
<span class="normal"><a href="#__codelineno-33-11">11</a></span>
<span class="normal"><a href="#__codelineno-33-12">12</a></span>
<span class="normal"><a href="#__codelineno-33-13">13</a></span>
<span class="normal"><a href="#__codelineno-33-14">14</a></span>
<span class="normal"><a href="#__codelineno-33-15">15</a></span>
<span class="normal"><a href="#__codelineno-33-16">16</a></span>
<span class="normal"><a href="#__codelineno-33-17">17</a></span>
<span class="normal"><a href="#__codelineno-33-18">18</a></span>
<span class="normal"><a href="#__codelineno-33-19">19</a></span>
<span class="normal"><a href="#__codelineno-33-20">20</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-33-7" name="__codelineno-33-7"></a><span class="n">test</span><span class="o">(</span><span class="s2">&quot;reads_son [bam]&quot;</span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-33-8" name="__codelineno-33-8"></a>
<a id="__codelineno-33-9" name="__codelineno-33-9"></a><span class="w">    </span><span class="n">setup</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-33-10" name="__codelineno-33-10"></a><span class="w">        </span><span class="n">run</span><span class="o">(</span><span class="s2">&quot;SAMTOOLS_INDEX&quot;</span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-33-11" name="__codelineno-33-11"></a><span class="w">            </span><span class="n">script</span><span class="w"> </span><span class="s2">&quot;../../../samtools/index/main.nf&quot;</span>
<a id="__codelineno-33-12" name="__codelineno-33-12"></a><span class="w">            </span><span class="n">process</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-33-13" name="__codelineno-33-13"></a><span class="w">                </span><span class="s2">&quot;&quot;&quot;</span>
<a id="__codelineno-33-14" name="__codelineno-33-14"></a><span class="s2">                input[0] =  file(&quot;${projectDir}/data/bam/reads_son.bam&quot;)</span>
<a id="__codelineno-33-15" name="__codelineno-33-15"></a><span class="s2">                &quot;&quot;&quot;</span>
<a id="__codelineno-33-16" name="__codelineno-33-16"></a><span class="w">            </span><span class="o">}</span>
<a id="__codelineno-33-17" name="__codelineno-33-17"></a><span class="w">        </span><span class="o">}</span>
<a id="__codelineno-33-18" name="__codelineno-33-18"></a><span class="w">    </span><span class="o">}</span>
<a id="__codelineno-33-19" name="__codelineno-33-19"></a>
<a id="__codelineno-33-20" name="__codelineno-33-20"></a><span class="w">    </span><span class="n">when</span><span class="w"> </span><span class="o">{</span>
</code></pre></div></td></tr></table></div>
<p>Then we can refer to the output of that process in the <code>when</code> block where we specify the test inputs:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">modules/local/gatk/haplotypecaller/tests/main.nf.test</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-34-20">20</a></span>
<span class="normal"><a href="#__codelineno-34-21">21</a></span>
<span class="normal"><a href="#__codelineno-34-22">22</a></span>
<span class="normal"><a href="#__codelineno-34-23">23</a></span>
<span class="normal"><a href="#__codelineno-34-24">24</a></span>
<span class="normal"><a href="#__codelineno-34-25">25</a></span>
<span class="normal"><a href="#__codelineno-34-26">26</a></span>
<span class="normal"><a href="#__codelineno-34-27">27</a></span>
<span class="normal"><a href="#__codelineno-34-28">28</a></span>
<span class="normal"><a href="#__codelineno-34-29">29</a></span>
<span class="normal"><a href="#__codelineno-34-30">30</a></span>
<span class="normal"><a href="#__codelineno-34-31">31</a></span>
<span class="normal"><a href="#__codelineno-34-32">32</a></span>
<span class="normal"><a href="#__codelineno-34-33">33</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-34-20" name="__codelineno-34-20"></a><span class="w">    </span><span class="n">when</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-34-21" name="__codelineno-34-21"></a><span class="w">        </span><span class="n">params</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-34-22" name="__codelineno-34-22"></a><span class="w">            </span><span class="n">outdir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;tests/results&quot;</span>
<a id="__codelineno-34-23" name="__codelineno-34-23"></a><span class="w">        </span><span class="o">}</span>
<a id="__codelineno-34-24" name="__codelineno-34-24"></a><span class="w">        </span><span class="n">process</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-34-25" name="__codelineno-34-25"></a><span class="w">            </span><span class="s2">&quot;&quot;&quot;</span>
<a id="__codelineno-34-26" name="__codelineno-34-26"></a><span class="s2">            input[0] = SAMTOOLS_INDEX.out</span>
<a id="__codelineno-34-27" name="__codelineno-34-27"></a><span class="s2">            input[1] = file(&quot;${projectDir}/data/ref/ref.fasta&quot;)</span>
<a id="__codelineno-34-28" name="__codelineno-34-28"></a><span class="s2">            input[2] = file(&quot;${projectDir}/data/ref/ref.fasta.fai&quot;)</span>
<a id="__codelineno-34-29" name="__codelineno-34-29"></a><span class="s2">            input[3] = file(&quot;${projectDir}/data/ref/ref.dict&quot;)</span>
<a id="__codelineno-34-30" name="__codelineno-34-30"></a><span class="s2">            input[4] = file(&quot;${projectDir}/data/ref/intervals.bed&quot;)</span>
<a id="__codelineno-34-31" name="__codelineno-34-31"></a><span class="s2">            &quot;&quot;&quot;</span>
<a id="__codelineno-34-32" name="__codelineno-34-32"></a><span class="w">        </span><span class="o">}</span>
<a id="__codelineno-34-33" name="__codelineno-34-33"></a><span class="w">    </span><span class="o">}</span>
</code></pre></div></td></tr></table></div>
<p>Using the setup method is convenient, though you should consider its use carefully.
Module-level tests are supposed to test processes in isolation in order to detect changes at the individual process level; breaking that isolation undermines that principle.</p>
<p>In many cases, it's better to use intermediate test files that you generate manually as part of the preparation.
We'll show you how to do that in the next section.
But we show you the setup method too because sometimes it is useful to be able to test the connection between two modules specifically.</p>
<!-- TODO: consider switching the order of types of tests, might make more sense in terms of flow -->

<h3 id="24-run-test-and-examine-output">2.4. Run test and examine output<a class="headerlink" href="#24-run-test-and-examine-output" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a>nf-test<span class="w"> </span><span class="nb">test</span><span class="w"> </span>--profile<span class="w"> </span>docker_on<span class="w"> </span>modules/local/gatk/haplotypecaller/tests/main.nf.test
</code></pre></div>
<p>This produces the following output:</p>
<div class="highlight"><span class="filename">Output</span><pre><span></span><code><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a><span class="go">ð nf-test 0.9.1</span>
<a id="__codelineno-36-2" name="__codelineno-36-2" href="#__codelineno-36-2"></a><span class="go">https://www.nf-test.com</span>
<a id="__codelineno-36-3" name="__codelineno-36-3" href="#__codelineno-36-3"></a><span class="gp gp-VirtualEnv">(c)</span> <span class="go">2021 - 2024 Lukas Forer and Sebastian Schoenherr</span>
<a id="__codelineno-36-4" name="__codelineno-36-4" href="#__codelineno-36-4"></a>
<a id="__codelineno-36-5" name="__codelineno-36-5" href="#__codelineno-36-5"></a>
<a id="__codelineno-36-6" name="__codelineno-36-6" href="#__codelineno-36-6"></a><span class="go">Test Process GATK_HAPLOTYPECALLER</span>
<a id="__codelineno-36-7" name="__codelineno-36-7" href="#__codelineno-36-7"></a>
<a id="__codelineno-36-8" name="__codelineno-36-8" href="#__codelineno-36-8"></a><span class="go">  Test [86fd1bce] &#39;reads_son [bam]&#39; PASSED (19.082s)</span>
<a id="__codelineno-36-9" name="__codelineno-36-9" href="#__codelineno-36-9"></a><span class="go">  Snapshots:</span>
<a id="__codelineno-36-10" name="__codelineno-36-10" href="#__codelineno-36-10"></a><span class="go">    1 created [reads_son [bam]]</span>
<a id="__codelineno-36-11" name="__codelineno-36-11" href="#__codelineno-36-11"></a>
<a id="__codelineno-36-12" name="__codelineno-36-12" href="#__codelineno-36-12"></a>
<a id="__codelineno-36-13" name="__codelineno-36-13" href="#__codelineno-36-13"></a><span class="go">Snapshot Summary:</span>
<a id="__codelineno-36-14" name="__codelineno-36-14" href="#__codelineno-36-14"></a><span class="go">  1 created</span>
<a id="__codelineno-36-15" name="__codelineno-36-15" href="#__codelineno-36-15"></a>
<a id="__codelineno-36-16" name="__codelineno-36-16" href="#__codelineno-36-16"></a><span class="go">SUCCESS: Executed 1 tests in 19.09s</span>
</code></pre></div>
<p>It also produces a snapshot file like earlier.</p>
<h3 id="25-run-again-and-observe-failure">2.5. Run again and observe failure<a class="headerlink" href="#25-run-again-and-observe-failure" title="Permanent link">&para;</a></h3>
<p>Interestingly, if you run the exact same command again, this time the test will fail with the following:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a>nf-test<span class="w"> </span><span class="nb">test</span><span class="w"> </span>--profile<span class="w"> </span>docker_on<span class="w"> </span>modules/local/gatk/haplotypecaller/tests/main.nf.test
</code></pre></div>
<p>Produces:</p>
<div class="highlight"><span class="filename">Output</span><pre><span></span><code><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a><span class="go">ð nf-test 0.9.1</span>
<a id="__codelineno-38-2" name="__codelineno-38-2" href="#__codelineno-38-2"></a><span class="go">https://www.nf-test.com</span>
<a id="__codelineno-38-3" name="__codelineno-38-3" href="#__codelineno-38-3"></a><span class="gp gp-VirtualEnv">(c)</span> <span class="go">2021 - 2024 Lukas Forer and Sebastian Schoenherr</span>
<a id="__codelineno-38-4" name="__codelineno-38-4" href="#__codelineno-38-4"></a>
<a id="__codelineno-38-5" name="__codelineno-38-5" href="#__codelineno-38-5"></a>
<a id="__codelineno-38-6" name="__codelineno-38-6" href="#__codelineno-38-6"></a><span class="go">Test Process GATK_HAPLOTYPECALLER</span>
<a id="__codelineno-38-7" name="__codelineno-38-7" href="#__codelineno-38-7"></a>
<a id="__codelineno-38-8" name="__codelineno-38-8" href="#__codelineno-38-8"></a><span class="go">  Test [86fd1bce] &#39;reads_son [bam]&#39; FAILED (23.781s)</span>
<a id="__codelineno-38-9" name="__codelineno-38-9" href="#__codelineno-38-9"></a>
<a id="__codelineno-38-10" name="__codelineno-38-10" href="#__codelineno-38-10"></a><span class="go">  java.lang.RuntimeException: Different Snapshot:</span>
<a id="__codelineno-38-11" name="__codelineno-38-11" href="#__codelineno-38-11"></a><span class="go">  [                                                                                                     [</span>
<a id="__codelineno-38-12" name="__codelineno-38-12" href="#__codelineno-38-12"></a><span class="go">      {                                                                                                     {</span>
<a id="__codelineno-38-13" name="__codelineno-38-13" href="#__codelineno-38-13"></a><span class="go">          &quot;0&quot;: [                                                                                                        &quot;0&quot;: [</span>
<a id="__codelineno-38-14" name="__codelineno-38-14" href="#__codelineno-38-14"></a><span class="go">              [                                                                                                     [</span>
<a id="__codelineno-38-15" name="__codelineno-38-15" href="#__codelineno-38-15"></a><span class="go">                  {                                                                                                     {</span>
<a id="__codelineno-38-16" name="__codelineno-38-16" href="#__codelineno-38-16"></a><span class="go">                      &quot;id&quot;: &quot;reads_son&quot;                                                                                       &quot;id&quot;: &quot;reads_son&quot;</span>
<a id="__codelineno-38-17" name="__codelineno-38-17" href="#__codelineno-38-17"></a><span class="go">                  },                                                                                                    },</span>
<a id="__codelineno-38-18" name="__codelineno-38-18" href="#__codelineno-38-18"></a><span class="go">                  &quot;reads_son.bam.g.vcf:md5,f3583cbbe439469bfc166612e1617694&quot;,                      |                    &quot;reads_son.bam.g.vcf:md5,428f855d616b34d44a4f0a3bcc1a0b14&quot;,</span>
<a id="__codelineno-38-19" name="__codelineno-38-19" href="#__codelineno-38-19"></a><span class="go">                  &quot;reads_son.bam.g.vcf.idx:md5,16a78feaf6602adb2a131494e0274f9e&quot;                           |                    &quot;reads_son.bam.g.vcf.idx:md5,5a8d299625ef3cd3266229507a789dbb&quot;</span>
<a id="__codelineno-38-20" name="__codelineno-38-20" href="#__codelineno-38-20"></a><span class="go">              ]                                                                                                     ]</span>
<a id="__codelineno-38-21" name="__codelineno-38-21" href="#__codelineno-38-21"></a><span class="go">          ]                                                                                                     ]</span>
<a id="__codelineno-38-22" name="__codelineno-38-22" href="#__codelineno-38-22"></a><span class="go">      }                                                                                                     }</span>
<a id="__codelineno-38-23" name="__codelineno-38-23" href="#__codelineno-38-23"></a><span class="go">  ]                                                                                                     ]</span>
<a id="__codelineno-38-24" name="__codelineno-38-24" href="#__codelineno-38-24"></a>
<a id="__codelineno-38-25" name="__codelineno-38-25" href="#__codelineno-38-25"></a><span class="go">  Nextflow stdout:</span>
<a id="__codelineno-38-26" name="__codelineno-38-26" href="#__codelineno-38-26"></a>
<a id="__codelineno-38-27" name="__codelineno-38-27" href="#__codelineno-38-27"></a><span class="go">  Nextflow stderr:</span>
<a id="__codelineno-38-28" name="__codelineno-38-28" href="#__codelineno-38-28"></a>
<a id="__codelineno-38-29" name="__codelineno-38-29" href="#__codelineno-38-29"></a><span class="go">  Nextflow 24.09.2-edge is available - Please consider updating your version to it</span>
<a id="__codelineno-38-30" name="__codelineno-38-30" href="#__codelineno-38-30"></a>
<a id="__codelineno-38-31" name="__codelineno-38-31" href="#__codelineno-38-31"></a>
<a id="__codelineno-38-32" name="__codelineno-38-32" href="#__codelineno-38-32"></a><span class="go">    Obsolete snapshots can only be checked if all tests of a file are executed successful.</span>
<a id="__codelineno-38-33" name="__codelineno-38-33" href="#__codelineno-38-33"></a>
<a id="__codelineno-38-34" name="__codelineno-38-34" href="#__codelineno-38-34"></a>
<a id="__codelineno-38-35" name="__codelineno-38-35" href="#__codelineno-38-35"></a><span class="go">FAILURE: Executed 1 tests in 23.79s (1 failed)</span>
</code></pre></div>
<p>The error message tells you there were differences between the snapshots for the two runs; specifically, the md5sum values are different for the VCF files.</p>
<p>Why? To make a long story short, the HaplotypeCaller tool includes a timestamp in the VCF header that is different every time (by definition).
As a result, we can't just expect the files to have identical md5sums even if they have identical content in terms of the variant calls themselves.</p>
<p>How do we deal with that?</p>
<h3 id="26-use-a-content-assertion-method">2.6. Use a content assertion method<a class="headerlink" href="#26-use-a-content-assertion-method" title="Permanent link">&para;</a></h3>
<p>One way to solve the problem is to use a <a href="https://nf-co.re/docs/contributing/tutorials/nf-test_assertions">different kind of assertion</a>.
In this case, we're going to check for specific content instead of asserting identity.
More exactly, we'll have the tool read the lines of the VCF file and check for the existence of specific lines.</p>
<p>In practice, we replace the second assertion in the <code>then</code> block as follows:</p>
<p><em>Before:</em></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">modules/local/gatk/haplotypecaller/tests/main.nf.test</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-39-35">35</a></span>
<span class="normal"><a href="#__codelineno-39-36">36</a></span>
<span class="normal"><a href="#__codelineno-39-37">37</a></span>
<span class="normal"><a href="#__codelineno-39-38">38</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-39-35" name="__codelineno-39-35"></a><span class="n">then</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-39-36" name="__codelineno-39-36"></a><span class="w">    </span><span class="k">assert</span><span class="w"> </span><span class="n">process</span><span class="o">.</span><span class="na">success</span>
<a id="__codelineno-39-37" name="__codelineno-39-37"></a><span class="w">    </span><span class="k">assert</span><span class="w"> </span><span class="n">snapshot</span><span class="o">(</span><span class="n">process</span><span class="o">.</span><span class="na">out</span><span class="o">).</span><span class="na">match</span><span class="o">()</span>
<a id="__codelineno-39-38" name="__codelineno-39-38"></a><span class="o">}</span>
</code></pre></div></td></tr></table></div>
<p><em>After:</em></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">modules/local/gatk/haplotypecaller/tests/main.nf.test</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-40-35">35</a></span>
<span class="normal"><a href="#__codelineno-40-36">36</a></span>
<span class="normal"><a href="#__codelineno-40-37">37</a></span>
<span class="normal"><a href="#__codelineno-40-38">38</a></span>
<span class="normal"><a href="#__codelineno-40-39">39</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-40-35" name="__codelineno-40-35"></a><span class="go">then {</span>
<a id="__codelineno-40-36" name="__codelineno-40-36"></a><span class="go">    assert process.success</span>
<a id="__codelineno-40-37" name="__codelineno-40-37"></a><span class="go">    assert path(process.out[0][0]).readLines().contains(&#39;#CHROM	POS	ID	REF	ALT	QUAL	FILTER	INFO	FORMAT	reads_son&#39;)</span>
<a id="__codelineno-40-38" name="__codelineno-40-38"></a><span class="go">    assert path(process.out[0][0]).readLines().contains(&#39;20_10037292_10066351	3277	.	G	&lt;NON_REF&gt;	.	.	END=3282	GT:DP:GQ:MIN_DP:PL	0/0:25:72:24:0,72,719&#39;)</span>
<a id="__codelineno-40-39" name="__codelineno-40-39"></a><span class="go">}</span>
</code></pre></div></td></tr></table></div>
<p>Here we're reading in the full content of the VCF output file and searching for a content match, which is okay to do on a small test file, but you wouldn't want to do that on a larger file.
You might instead choose to read in specific lines.</p>
<p>This approach does require choosing more carefully what we want to use as the 'signal' to test for.
On the bright side, it can be used to test with great precision whether an analysis tool can consistently identify 'difficult' features (such as rare variants) as it undergoes further development.</p>
<h3 id="27-run-again-and-observe-success">2.7. Run again and observe success<a class="headerlink" href="#27-run-again-and-observe-success" title="Permanent link">&para;</a></h3>
<p>Once we've modified the test in this way, we can run the test multiple times, and it will consistently pass.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a>nf-test<span class="w"> </span><span class="nb">test</span><span class="w"> </span>--profile<span class="w"> </span>docker_on<span class="w"> </span>modules/local/gatk/haplotypecaller/tests/main.nf.test
</code></pre></div>
<p>Produces:</p>
<div class="highlight"><span class="filename">Output</span><pre><span></span><code><a id="__codelineno-42-1" name="__codelineno-42-1" href="#__codelineno-42-1"></a><span class="go">ð nf-test 0.9.1</span>
<a id="__codelineno-42-2" name="__codelineno-42-2" href="#__codelineno-42-2"></a><span class="go">https://www.nf-test.com</span>
<a id="__codelineno-42-3" name="__codelineno-42-3" href="#__codelineno-42-3"></a><span class="gp gp-VirtualEnv">(c)</span> <span class="go">2021 - 2024 Lukas Forer and Sebastian Schoenherr</span>
<a id="__codelineno-42-4" name="__codelineno-42-4" href="#__codelineno-42-4"></a>
<a id="__codelineno-42-5" name="__codelineno-42-5" href="#__codelineno-42-5"></a>
<a id="__codelineno-42-6" name="__codelineno-42-6" href="#__codelineno-42-6"></a><span class="go">Test Process GATK_HAPLOTYPECALLER</span>
<a id="__codelineno-42-7" name="__codelineno-42-7" href="#__codelineno-42-7"></a>
<a id="__codelineno-42-8" name="__codelineno-42-8" href="#__codelineno-42-8"></a><span class="go">  Test [86fd1bce] &#39;reads_son [bam]&#39; PASSED (19.765s)</span>
<a id="__codelineno-42-9" name="__codelineno-42-9" href="#__codelineno-42-9"></a>
<a id="__codelineno-42-10" name="__codelineno-42-10" href="#__codelineno-42-10"></a>
<a id="__codelineno-42-11" name="__codelineno-42-11" href="#__codelineno-42-11"></a><span class="go">SUCCESS: Executed 1 tests in 19.77s</span>
</code></pre></div>
<h3 id="28-add-more-test-data">2.8. Add more test data<a class="headerlink" href="#28-add-more-test-data" title="Permanent link">&para;</a></h3>
<p>To practice writing these kinds of tests, you can repeat the procedure for the other two input data files provided.
You'll need to make sure to copy lines from the corresponding output VCFs.</p>
<p>Test for the 'mother' sample:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">modules/local/gatk/haplotypecaller/tests/main.nf.test</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-43-43">43</a></span>
<span class="normal"><a href="#__codelineno-43-44">44</a></span>
<span class="normal"><a href="#__codelineno-43-45">45</a></span>
<span class="normal"><a href="#__codelineno-43-46">46</a></span>
<span class="normal"><a href="#__codelineno-43-47">47</a></span>
<span class="normal"><a href="#__codelineno-43-48">48</a></span>
<span class="normal"><a href="#__codelineno-43-49">49</a></span>
<span class="normal"><a href="#__codelineno-43-50">50</a></span>
<span class="normal"><a href="#__codelineno-43-51">51</a></span>
<span class="normal"><a href="#__codelineno-43-52">52</a></span>
<span class="normal"><a href="#__codelineno-43-53">53</a></span>
<span class="normal"><a href="#__codelineno-43-54">54</a></span>
<span class="normal"><a href="#__codelineno-43-55">55</a></span>
<span class="normal"><a href="#__codelineno-43-56">56</a></span>
<span class="normal"><a href="#__codelineno-43-57">57</a></span>
<span class="normal"><a href="#__codelineno-43-58">58</a></span>
<span class="normal"><a href="#__codelineno-43-59">59</a></span>
<span class="normal"><a href="#__codelineno-43-60">60</a></span>
<span class="normal"><a href="#__codelineno-43-61">61</a></span>
<span class="normal"><a href="#__codelineno-43-62">62</a></span>
<span class="normal"><a href="#__codelineno-43-63">63</a></span>
<span class="normal"><a href="#__codelineno-43-64">64</a></span>
<span class="normal"><a href="#__codelineno-43-65">65</a></span>
<span class="normal"><a href="#__codelineno-43-66">66</a></span>
<span class="normal"><a href="#__codelineno-43-67">67</a></span>
<span class="normal"><a href="#__codelineno-43-68">68</a></span>
<span class="normal"><a href="#__codelineno-43-69">69</a></span>
<span class="normal"><a href="#__codelineno-43-70">70</a></span>
<span class="normal"><a href="#__codelineno-43-71">71</a></span>
<span class="normal"><a href="#__codelineno-43-72">72</a></span>
<span class="normal"><a href="#__codelineno-43-73">73</a></span>
<span class="normal"><a href="#__codelineno-43-74">74</a></span>
<span class="normal"><a href="#__codelineno-43-75">75</a></span>
<span class="normal"><a href="#__codelineno-43-76">76</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-43-43" name="__codelineno-43-43"></a><span class="n">test</span><span class="o">(</span><span class="s2">&quot;reads_mother [bam]&quot;</span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-43-44" name="__codelineno-43-44"></a>
<a id="__codelineno-43-45" name="__codelineno-43-45"></a><span class="w">    </span><span class="n">setup</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-43-46" name="__codelineno-43-46"></a><span class="w">        </span><span class="n">run</span><span class="o">(</span><span class="s2">&quot;SAMTOOLS_INDEX&quot;</span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-43-47" name="__codelineno-43-47"></a><span class="w">            </span><span class="n">script</span><span class="w"> </span><span class="s2">&quot;../../../samtools/index/main.nf&quot;</span>
<a id="__codelineno-43-48" name="__codelineno-43-48"></a><span class="w">            </span><span class="n">process</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-43-49" name="__codelineno-43-49"></a><span class="w">                </span><span class="s2">&quot;&quot;&quot;</span>
<a id="__codelineno-43-50" name="__codelineno-43-50"></a><span class="s2">                input[0] =  file(&quot;${projectDir}/data/bam/reads_mother.bam&quot;)</span>
<a id="__codelineno-43-51" name="__codelineno-43-51"></a><span class="s2">                &quot;&quot;&quot;</span>
<a id="__codelineno-43-52" name="__codelineno-43-52"></a><span class="w">            </span><span class="o">}</span>
<a id="__codelineno-43-53" name="__codelineno-43-53"></a><span class="w">        </span><span class="o">}</span>
<a id="__codelineno-43-54" name="__codelineno-43-54"></a><span class="w">    </span><span class="o">}</span>
<a id="__codelineno-43-55" name="__codelineno-43-55"></a>
<a id="__codelineno-43-56" name="__codelineno-43-56"></a><span class="w">    </span><span class="n">when</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-43-57" name="__codelineno-43-57"></a><span class="w">        </span><span class="n">params</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-43-58" name="__codelineno-43-58"></a><span class="w">            </span><span class="n">outdir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;tests/results&quot;</span>
<a id="__codelineno-43-59" name="__codelineno-43-59"></a><span class="w">        </span><span class="o">}</span>
<a id="__codelineno-43-60" name="__codelineno-43-60"></a><span class="w">        </span><span class="n">process</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-43-61" name="__codelineno-43-61"></a><span class="w">            </span><span class="s2">&quot;&quot;&quot;</span>
<a id="__codelineno-43-62" name="__codelineno-43-62"></a><span class="s2">            input[0] = SAMTOOLS_INDEX.out</span>
<a id="__codelineno-43-63" name="__codelineno-43-63"></a><span class="s2">            input[1] = file(&quot;${projectDir}/data/ref/ref.fasta&quot;)</span>
<a id="__codelineno-43-64" name="__codelineno-43-64"></a><span class="s2">            input[2] = file(&quot;${projectDir}/data/ref/ref.fasta.fai&quot;)</span>
<a id="__codelineno-43-65" name="__codelineno-43-65"></a><span class="s2">            input[3] = file(&quot;${projectDir}/data/ref/ref.dict&quot;)</span>
<a id="__codelineno-43-66" name="__codelineno-43-66"></a><span class="s2">            input[4] = file(&quot;${projectDir}/data/ref/intervals.bed&quot;)</span>
<a id="__codelineno-43-67" name="__codelineno-43-67"></a><span class="s2">            &quot;&quot;&quot;</span>
<a id="__codelineno-43-68" name="__codelineno-43-68"></a><span class="w">        </span><span class="o">}</span>
<a id="__codelineno-43-69" name="__codelineno-43-69"></a><span class="w">    </span><span class="o">}</span>
<a id="__codelineno-43-70" name="__codelineno-43-70"></a>
<a id="__codelineno-43-71" name="__codelineno-43-71"></a><span class="w">    </span><span class="n">then</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-43-72" name="__codelineno-43-72"></a><span class="w">        </span><span class="k">assert</span><span class="w"> </span><span class="n">process</span><span class="o">.</span><span class="na">success</span>
<a id="__codelineno-43-73" name="__codelineno-43-73"></a><span class="w">        </span><span class="k">assert</span><span class="w"> </span><span class="n">path</span><span class="o">(</span><span class="n">process</span><span class="o">.</span><span class="na">out</span><span class="o">[</span><span class="mi">0</span><span class="o">][</span><span class="mi">0</span><span class="o">]).</span><span class="na">readLines</span><span class="o">().</span><span class="na">contains</span><span class="o">(</span><span class="s1">&#39;#CHROM	POS	ID	REF	ALT	QUAL	FILTER	INFO	FORMAT	reads_mother&#39;</span><span class="o">)</span>
<a id="__codelineno-43-74" name="__codelineno-43-74"></a><span class="w">        </span><span class="k">assert</span><span class="w"> </span><span class="n">path</span><span class="o">(</span><span class="n">process</span><span class="o">.</span><span class="na">out</span><span class="o">[</span><span class="mi">0</span><span class="o">][</span><span class="mi">0</span><span class="o">]).</span><span class="na">readLines</span><span class="o">().</span><span class="na">contains</span><span class="o">(</span><span class="s1">&#39;20_10037292_10066351	3277	.	G	&lt;NON_REF&gt;	.	.	END=3278	GT:DP:GQ:MIN_DP:PL	0/0:38:99:37:0,102,1530&#39;</span><span class="o">)</span>
<a id="__codelineno-43-75" name="__codelineno-43-75"></a><span class="w">    </span><span class="o">}</span>
<a id="__codelineno-43-76" name="__codelineno-43-76"></a><span class="o">}</span>
</code></pre></div></td></tr></table></div>
<p>Test for the 'father' sample:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">modules/local/gatk/haplotypecaller/tests/main.nf.test</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-44-78"> 78</a></span>
<span class="normal"><a href="#__codelineno-44-79"> 79</a></span>
<span class="normal"><a href="#__codelineno-44-80"> 80</a></span>
<span class="normal"><a href="#__codelineno-44-81"> 81</a></span>
<span class="normal"><a href="#__codelineno-44-82"> 82</a></span>
<span class="normal"><a href="#__codelineno-44-83"> 83</a></span>
<span class="normal"><a href="#__codelineno-44-84"> 84</a></span>
<span class="normal"><a href="#__codelineno-44-85"> 85</a></span>
<span class="normal"><a href="#__codelineno-44-86"> 86</a></span>
<span class="normal"><a href="#__codelineno-44-87"> 87</a></span>
<span class="normal"><a href="#__codelineno-44-88"> 88</a></span>
<span class="normal"><a href="#__codelineno-44-89"> 89</a></span>
<span class="normal"><a href="#__codelineno-44-90"> 90</a></span>
<span class="normal"><a href="#__codelineno-44-91"> 91</a></span>
<span class="normal"><a href="#__codelineno-44-92"> 92</a></span>
<span class="normal"><a href="#__codelineno-44-93"> 93</a></span>
<span class="normal"><a href="#__codelineno-44-94"> 94</a></span>
<span class="normal"><a href="#__codelineno-44-95"> 95</a></span>
<span class="normal"><a href="#__codelineno-44-96"> 96</a></span>
<span class="normal"><a href="#__codelineno-44-97"> 97</a></span>
<span class="normal"><a href="#__codelineno-44-98"> 98</a></span>
<span class="normal"><a href="#__codelineno-44-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-44-100">100</a></span>
<span class="normal"><a href="#__codelineno-44-101">101</a></span>
<span class="normal"><a href="#__codelineno-44-102">102</a></span>
<span class="normal"><a href="#__codelineno-44-103">103</a></span>
<span class="normal"><a href="#__codelineno-44-104">104</a></span>
<span class="normal"><a href="#__codelineno-44-105">105</a></span>
<span class="normal"><a href="#__codelineno-44-106">106</a></span>
<span class="normal"><a href="#__codelineno-44-107">107</a></span>
<span class="normal"><a href="#__codelineno-44-108">108</a></span>
<span class="normal"><a href="#__codelineno-44-109">109</a></span>
<span class="normal"><a href="#__codelineno-44-110">110</a></span>
<span class="normal"><a href="#__codelineno-44-111">111</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-44-78" name="__codelineno-44-78"></a><span class="n">test</span><span class="o">(</span><span class="s2">&quot;reads_father [bam]&quot;</span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-44-79" name="__codelineno-44-79"></a>
<a id="__codelineno-44-80" name="__codelineno-44-80"></a><span class="w">    </span><span class="n">setup</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-44-81" name="__codelineno-44-81"></a><span class="w">        </span><span class="n">run</span><span class="o">(</span><span class="s2">&quot;SAMTOOLS_INDEX&quot;</span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-44-82" name="__codelineno-44-82"></a><span class="w">            </span><span class="n">script</span><span class="w"> </span><span class="s2">&quot;../../../samtools/index/main.nf&quot;</span>
<a id="__codelineno-44-83" name="__codelineno-44-83"></a><span class="w">            </span><span class="n">process</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-44-84" name="__codelineno-44-84"></a><span class="w">                </span><span class="s2">&quot;&quot;&quot;</span>
<a id="__codelineno-44-85" name="__codelineno-44-85"></a><span class="s2">                input[0] =  file(&quot;${projectDir}/data/bam/reads_father.bam&quot;)</span>
<a id="__codelineno-44-86" name="__codelineno-44-86"></a><span class="s2">                &quot;&quot;&quot;</span>
<a id="__codelineno-44-87" name="__codelineno-44-87"></a><span class="w">            </span><span class="o">}</span>
<a id="__codelineno-44-88" name="__codelineno-44-88"></a><span class="w">        </span><span class="o">}</span>
<a id="__codelineno-44-89" name="__codelineno-44-89"></a><span class="w">    </span><span class="o">}</span>
<a id="__codelineno-44-90" name="__codelineno-44-90"></a>
<a id="__codelineno-44-91" name="__codelineno-44-91"></a><span class="w">    </span><span class="n">when</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-44-92" name="__codelineno-44-92"></a><span class="w">        </span><span class="n">params</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-44-93" name="__codelineno-44-93"></a><span class="w">            </span><span class="n">outdir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;tests/results&quot;</span>
<a id="__codelineno-44-94" name="__codelineno-44-94"></a><span class="w">        </span><span class="o">}</span>
<a id="__codelineno-44-95" name="__codelineno-44-95"></a><span class="w">        </span><span class="n">process</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-44-96" name="__codelineno-44-96"></a><span class="w">            </span><span class="s2">&quot;&quot;&quot;</span>
<a id="__codelineno-44-97" name="__codelineno-44-97"></a><span class="s2">            input[0] = SAMTOOLS_INDEX.out</span>
<a id="__codelineno-44-98" name="__codelineno-44-98"></a><span class="s2">            input[1] = file(&quot;${projectDir}/data/ref/ref.fasta&quot;)</span>
<a id="__codelineno-44-99" name="__codelineno-44-99"></a><span class="s2">            input[2] = file(&quot;${projectDir}/data/ref/ref.fasta.fai&quot;)</span>
<a id="__codelineno-44-100" name="__codelineno-44-100"></a><span class="s2">            input[3] = file(&quot;${projectDir}/data/ref/ref.dict&quot;)</span>
<a id="__codelineno-44-101" name="__codelineno-44-101"></a><span class="s2">            input[4] = file(&quot;${projectDir}/data/ref/intervals.bed&quot;)</span>
<a id="__codelineno-44-102" name="__codelineno-44-102"></a><span class="s2">            &quot;&quot;&quot;</span>
<a id="__codelineno-44-103" name="__codelineno-44-103"></a><span class="w">        </span><span class="o">}</span>
<a id="__codelineno-44-104" name="__codelineno-44-104"></a><span class="w">    </span><span class="o">}</span>
<a id="__codelineno-44-105" name="__codelineno-44-105"></a>
<a id="__codelineno-44-106" name="__codelineno-44-106"></a><span class="w">    </span><span class="n">then</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-44-107" name="__codelineno-44-107"></a><span class="w">        </span><span class="k">assert</span><span class="w"> </span><span class="n">process</span><span class="o">.</span><span class="na">success</span>
<a id="__codelineno-44-108" name="__codelineno-44-108"></a><span class="w">        </span><span class="k">assert</span><span class="w"> </span><span class="n">path</span><span class="o">(</span><span class="n">process</span><span class="o">.</span><span class="na">out</span><span class="o">[</span><span class="mi">0</span><span class="o">][</span><span class="mi">0</span><span class="o">]).</span><span class="na">readLines</span><span class="o">().</span><span class="na">contains</span><span class="o">(</span><span class="s1">&#39;#CHROM	POS	ID	REF	ALT	QUAL	FILTER	INFO	FORMAT	reads_father&#39;</span><span class="o">)</span>
<a id="__codelineno-44-109" name="__codelineno-44-109"></a><span class="w">        </span><span class="k">assert</span><span class="w"> </span><span class="n">path</span><span class="o">(</span><span class="n">process</span><span class="o">.</span><span class="na">out</span><span class="o">[</span><span class="mi">0</span><span class="o">][</span><span class="mi">0</span><span class="o">]).</span><span class="na">readLines</span><span class="o">().</span><span class="na">contains</span><span class="o">(</span><span class="s1">&#39;20_10037292_10066351	3277	.	G	&lt;NON_REF&gt;	.	.	END=3281	GT:DP:GQ:MIN_DP:PL	0/0:44:99:42:0,120,1800&#39;</span><span class="o">)</span>
<a id="__codelineno-44-110" name="__codelineno-44-110"></a><span class="w">    </span><span class="o">}</span>
<a id="__codelineno-44-111" name="__codelineno-44-111"></a><span class="o">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="29-run-the-test-command">2.9. Run the test command<a class="headerlink" href="#29-run-the-test-command" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-45-1" name="__codelineno-45-1" href="#__codelineno-45-1"></a>nf-test<span class="w"> </span><span class="nb">test</span><span class="w"> </span>--profile<span class="w"> </span>docker_on<span class="w"> </span>modules/local/gatk/haplotypecaller/tests/main.nf.test
</code></pre></div>
<p>Produces:</p>
<div class="highlight"><span class="filename">Output</span><pre><span></span><code><a id="__codelineno-46-1" name="__codelineno-46-1" href="#__codelineno-46-1"></a><span class="go">ð nf-test 0.9.1</span>
<a id="__codelineno-46-2" name="__codelineno-46-2" href="#__codelineno-46-2"></a><span class="go">https://www.nf-test.com</span>
<a id="__codelineno-46-3" name="__codelineno-46-3" href="#__codelineno-46-3"></a><span class="gp gp-VirtualEnv">(c)</span> <span class="go">2021 - 2024 Lukas Forer and Sebastian Schoenherr</span>
<a id="__codelineno-46-4" name="__codelineno-46-4" href="#__codelineno-46-4"></a>
<a id="__codelineno-46-5" name="__codelineno-46-5" href="#__codelineno-46-5"></a>
<a id="__codelineno-46-6" name="__codelineno-46-6" href="#__codelineno-46-6"></a><span class="go">Test Process GATK_HAPLOTYPECALLER</span>
<a id="__codelineno-46-7" name="__codelineno-46-7" href="#__codelineno-46-7"></a>
<a id="__codelineno-46-8" name="__codelineno-46-8" href="#__codelineno-46-8"></a><span class="go">  Test [86fd1bce] &#39;reads_son [bam]&#39; PASSED (21.639s)</span>
<a id="__codelineno-46-9" name="__codelineno-46-9" href="#__codelineno-46-9"></a><span class="go">  Test [547788fd] &#39;reads_mother [bam]&#39; PASSED (18.153s)</span>
<a id="__codelineno-46-10" name="__codelineno-46-10" href="#__codelineno-46-10"></a><span class="go">  Test [be786719] &#39;reads_father [bam]&#39; PASSED (18.058s)</span>
<a id="__codelineno-46-11" name="__codelineno-46-11" href="#__codelineno-46-11"></a>
<a id="__codelineno-46-12" name="__codelineno-46-12" href="#__codelineno-46-12"></a>
<a id="__codelineno-46-13" name="__codelineno-46-13" href="#__codelineno-46-13"></a><span class="go">SUCCESS: Executed 3 tests in 57.858s</span>
</code></pre></div>
<p>That completes the basic test plan for this second step in the pipeline. On to the third and last module-level test!</p>
<h3 id="takeaway_2">Takeaway<a class="headerlink" href="#takeaway_2" title="Permanent link">&para;</a></h3>
<p>You know how to write tests for chained processes, and evaluate whether outputs contain specific lines.</p>
<h3 id="whats-next_2">What's next?<a class="headerlink" href="#whats-next_2" title="Permanent link">&para;</a></h3>
<p>Learn how to write tests that use manually generated intermediate test data.</p>
<hr />
<h2 id="3-use-locally-stored-inputs">3. Use locally stored inputs<a class="headerlink" href="#3-use-locally-stored-inputs" title="Permanent link">&para;</a></h2>
<p>For the third step in our pipeline we'll use manually generated intermediate test data that is co-located with the module itself.</p>
<p>We've included a copy of the intermediate files produced by the first part of the pipeline under the <code>jointgenotyping</code> module:</p>
<div class="highlight"><span class="filename">Directory contents</span><pre><span></span><code><a id="__codelineno-47-1" name="__codelineno-47-1" href="#__codelineno-47-1"></a><span class="go">modules/local/gatk/jointgenotyping/tests/inputs/</span>
<a id="__codelineno-47-2" name="__codelineno-47-2" href="#__codelineno-47-2"></a><span class="go">âââ reads_father.bam.g.vcf</span>
<a id="__codelineno-47-3" name="__codelineno-47-3" href="#__codelineno-47-3"></a><span class="go">âââ reads_father.bam.g.vcf.idx</span>
<a id="__codelineno-47-4" name="__codelineno-47-4" href="#__codelineno-47-4"></a><span class="go">âââ reads_mother.bam.g.vcf</span>
<a id="__codelineno-47-5" name="__codelineno-47-5" href="#__codelineno-47-5"></a><span class="go">âââ reads_mother.bam.g.vcf.idx</span>
<a id="__codelineno-47-6" name="__codelineno-47-6" href="#__codelineno-47-6"></a><span class="go">âââ reads_son.bam.g.vcf</span>
<a id="__codelineno-47-7" name="__codelineno-47-7" href="#__codelineno-47-7"></a><span class="go">âââ reads_son.bam.g.vcf.idx</span>
</code></pre></div>
<p>The idea here is to use these files as inputs to the test we're going to write for the joint genotyping step.</p>
<h3 id="31-generate-the-test-file-stub">3.1. Generate the test file stub<a class="headerlink" href="#31-generate-the-test-file-stub" title="Permanent link">&para;</a></h3>
<p>As previously, first we generate the file stub:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-48-1" name="__codelineno-48-1" href="#__codelineno-48-1"></a>nf-test<span class="w"> </span>generate<span class="w"> </span>process<span class="w"> </span>modules/local/gatk/jointgenotyping/main.nf
</code></pre></div>
<p>This produces the following test stub:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">tests/modules/local/gatk/jointgenotyping/main.nf.test</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-49-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-49-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-49-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-49-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-49-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-49-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-49-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-49-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-49-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-49-10">10</a></span>
<span class="normal"><a href="#__codelineno-49-11">11</a></span>
<span class="normal"><a href="#__codelineno-49-12">12</a></span>
<span class="normal"><a href="#__codelineno-49-13">13</a></span>
<span class="normal"><a href="#__codelineno-49-14">14</a></span>
<span class="normal"><a href="#__codelineno-49-15">15</a></span>
<span class="normal"><a href="#__codelineno-49-16">16</a></span>
<span class="normal"><a href="#__codelineno-49-17">17</a></span>
<span class="normal"><a href="#__codelineno-49-18">18</a></span>
<span class="normal"><a href="#__codelineno-49-19">19</a></span>
<span class="normal"><a href="#__codelineno-49-20">20</a></span>
<span class="normal"><a href="#__codelineno-49-21">21</a></span>
<span class="normal"><a href="#__codelineno-49-22">22</a></span>
<span class="normal"><a href="#__codelineno-49-23">23</a></span>
<span class="normal"><a href="#__codelineno-49-24">24</a></span>
<span class="normal"><a href="#__codelineno-49-25">25</a></span>
<span class="normal"><a href="#__codelineno-49-26">26</a></span>
<span class="normal"><a href="#__codelineno-49-27">27</a></span>
<span class="normal"><a href="#__codelineno-49-28">28</a></span>
<span class="normal"><a href="#__codelineno-49-29">29</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-49-1" name="__codelineno-49-1"></a><span class="n">nextflow_process</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-49-2" name="__codelineno-49-2"></a>
<a id="__codelineno-49-3" name="__codelineno-49-3"></a><span class="w">    </span><span class="n">name</span><span class="w"> </span><span class="s2">&quot;Test Process GATK_JOINTGENOTYPING&quot;</span>
<a id="__codelineno-49-4" name="__codelineno-49-4"></a><span class="w">    </span><span class="n">script</span><span class="w"> </span><span class="s2">&quot;modules/local/gatk/jointgenotyping/main.nf&quot;</span>
<a id="__codelineno-49-5" name="__codelineno-49-5"></a><span class="w">    </span><span class="n">process</span><span class="w"> </span><span class="s2">&quot;GATK_JOINTGENOTYPING&quot;</span>
<a id="__codelineno-49-6" name="__codelineno-49-6"></a>
<a id="__codelineno-49-7" name="__codelineno-49-7"></a><span class="w">    </span><span class="n">test</span><span class="o">(</span><span class="s2">&quot;Should run without failures&quot;</span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-49-8" name="__codelineno-49-8"></a>
<a id="__codelineno-49-9" name="__codelineno-49-9"></a><span class="w">        </span><span class="n">when</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-49-10" name="__codelineno-49-10"></a><span class="w">            </span><span class="n">params</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-49-11" name="__codelineno-49-11"></a><span class="w">                </span><span class="c1">// define parameters here. Example:</span>
<a id="__codelineno-49-12" name="__codelineno-49-12"></a><span class="w">                </span><span class="c1">// outdir = &quot;tests/results&quot;</span>
<a id="__codelineno-49-13" name="__codelineno-49-13"></a><span class="w">            </span><span class="o">}</span>
<a id="__codelineno-49-14" name="__codelineno-49-14"></a><span class="w">            </span><span class="n">process</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-49-15" name="__codelineno-49-15"></a><span class="w">                </span><span class="s2">&quot;&quot;&quot;</span>
<a id="__codelineno-49-16" name="__codelineno-49-16"></a><span class="s2">                // define inputs of the process here. Example:</span>
<a id="__codelineno-49-17" name="__codelineno-49-17"></a><span class="s2">                // input[0] = file(&quot;test-file.txt&quot;)</span>
<a id="__codelineno-49-18" name="__codelineno-49-18"></a><span class="s2">                &quot;&quot;&quot;</span>
<a id="__codelineno-49-19" name="__codelineno-49-19"></a><span class="w">            </span><span class="o">}</span>
<a id="__codelineno-49-20" name="__codelineno-49-20"></a><span class="w">        </span><span class="o">}</span>
<a id="__codelineno-49-21" name="__codelineno-49-21"></a>
<a id="__codelineno-49-22" name="__codelineno-49-22"></a><span class="w">        </span><span class="n">then</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-49-23" name="__codelineno-49-23"></a><span class="w">            </span><span class="k">assert</span><span class="w"> </span><span class="n">process</span><span class="o">.</span><span class="na">success</span>
<a id="__codelineno-49-24" name="__codelineno-49-24"></a><span class="w">            </span><span class="k">assert</span><span class="w"> </span><span class="n">snapshot</span><span class="o">(</span><span class="n">process</span><span class="o">.</span><span class="na">out</span><span class="o">).</span><span class="na">match</span><span class="o">()</span>
<a id="__codelineno-49-25" name="__codelineno-49-25"></a><span class="w">        </span><span class="o">}</span>
<a id="__codelineno-49-26" name="__codelineno-49-26"></a>
<a id="__codelineno-49-27" name="__codelineno-49-27"></a><span class="w">    </span><span class="o">}</span>
<a id="__codelineno-49-28" name="__codelineno-49-28"></a>
<a id="__codelineno-49-29" name="__codelineno-49-29"></a><span class="o">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="32-move-the-test-file-and-update-the-script-path">3.2. Move the test file and update the script path<a class="headerlink" href="#32-move-the-test-file-and-update-the-script-path" title="Permanent link">&para;</a></h3>
<p>This time we already have a directory for tests co-located with the module's <code>main.nf</code> file, so we can move the test stub file there:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-50-1" name="__codelineno-50-1" href="#__codelineno-50-1"></a>mv<span class="w"> </span>tests/modules/local/gatk/jointgenotyping/main.nf.test<span class="w"> </span>modules/local/gatk/jointgenotyping/tests/
</code></pre></div>
<p>And don't forget to update the script path:</p>
<p><em>Before:</em></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">modules/local/gatk/jointgenotyping/tests/main.nf.test</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-51-3">3</a></span>
<span class="normal"><a href="#__codelineno-51-4">4</a></span>
<span class="normal"><a href="#__codelineno-51-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-51-3" name="__codelineno-51-3"></a><span class="n">name</span><span class="w"> </span><span class="s2">&quot;Test Process GATK_JOINTGENOTYPING&quot;</span>
<a id="__codelineno-51-4" name="__codelineno-51-4"></a><span class="n">script</span><span class="w"> </span><span class="s2">&quot;modules/local/gatk/jointgenotyping/main.nf&quot;</span>
<a id="__codelineno-51-5" name="__codelineno-51-5"></a><span class="n">process</span><span class="w"> </span><span class="s2">&quot;GATK_JOINTGENOTYPING&quot;</span>
</code></pre></div></td></tr></table></div>
<p><em>After:</em></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">modules/local/gatk/jointgenotyping/tests/main.nf.test</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-52-3">3</a></span>
<span class="normal"><a href="#__codelineno-52-4">4</a></span>
<span class="normal"><a href="#__codelineno-52-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-52-3" name="__codelineno-52-3"></a><span class="n">name</span><span class="w"> </span><span class="s2">&quot;Test Process GATK_JOINTGENOTYPING&quot;</span>
<a id="__codelineno-52-4" name="__codelineno-52-4"></a><span class="n">script</span><span class="w"> </span><span class="s2">&quot;../main.nf&quot;</span>
<a id="__codelineno-52-5" name="__codelineno-52-5"></a><span class="n">process</span><span class="w"> </span><span class="s2">&quot;GATK_JOINTGENOTYPING&quot;</span>
</code></pre></div></td></tr></table></div>
<h3 id="33-provide-inputs">3.3. Provide inputs<a class="headerlink" href="#33-provide-inputs" title="Permanent link">&para;</a></h3>
<p>Fill in the inputs based on the process input definitions and rename the test accordingly:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">modules/local/gatk/jointgenotyping/tests/main.nf.test</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-53-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-53-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-53-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-53-10">10</a></span>
<span class="normal"><a href="#__codelineno-53-11">11</a></span>
<span class="normal"><a href="#__codelineno-53-12">12</a></span>
<span class="normal"><a href="#__codelineno-53-13">13</a></span>
<span class="normal"><a href="#__codelineno-53-14">14</a></span>
<span class="normal"><a href="#__codelineno-53-15">15</a></span>
<span class="normal"><a href="#__codelineno-53-16">16</a></span>
<span class="normal"><a href="#__codelineno-53-17">17</a></span>
<span class="normal"><a href="#__codelineno-53-18">18</a></span>
<span class="normal"><a href="#__codelineno-53-19">19</a></span>
<span class="normal"><a href="#__codelineno-53-20">20</a></span>
<span class="normal"><a href="#__codelineno-53-21">21</a></span>
<span class="normal"><a href="#__codelineno-53-22">22</a></span>
<span class="normal"><a href="#__codelineno-53-23">23</a></span>
<span class="normal"><a href="#__codelineno-53-24">24</a></span>
<span class="normal"><a href="#__codelineno-53-25">25</a></span>
<span class="normal"><a href="#__codelineno-53-26">26</a></span>
<span class="normal"><a href="#__codelineno-53-27">27</a></span>
<span class="normal"><a href="#__codelineno-53-28">28</a></span>
<span class="normal"><a href="#__codelineno-53-29">29</a></span>
<span class="normal"><a href="#__codelineno-53-30">30</a></span>
<span class="normal"><a href="#__codelineno-53-31">31</a></span>
<span class="normal"><a href="#__codelineno-53-32">32</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-53-7" name="__codelineno-53-7"></a><span class="n">test</span><span class="o">(</span><span class="s2">&quot;family_trio [vcf] [idx]&quot;</span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-53-8" name="__codelineno-53-8"></a>
<a id="__codelineno-53-9" name="__codelineno-53-9"></a><span class="w">    </span><span class="n">when</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-53-10" name="__codelineno-53-10"></a><span class="w">        </span><span class="n">params</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-53-11" name="__codelineno-53-11"></a><span class="w">            </span><span class="n">outdir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;tests/results&quot;</span>
<a id="__codelineno-53-12" name="__codelineno-53-12"></a><span class="w">        </span><span class="o">}</span>
<a id="__codelineno-53-13" name="__codelineno-53-13"></a><span class="w">        </span><span class="n">process</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-53-14" name="__codelineno-53-14"></a><span class="w">            </span><span class="s2">&quot;&quot;&quot;</span>
<a id="__codelineno-53-15" name="__codelineno-53-15"></a><span class="s2">            input[0] = [</span>
<a id="__codelineno-53-16" name="__codelineno-53-16"></a><span class="s2">                file(&quot;${projectDir}/modules/local/gatk/jointgenotyping/tests/inputs/reads_father.bam.g.vcf&quot;),</span>
<a id="__codelineno-53-17" name="__codelineno-53-17"></a><span class="s2">                file(&quot;${projectDir}/modules/local/gatk/jointgenotyping/tests/inputs/reads_mother.bam.g.vcf&quot;),</span>
<a id="__codelineno-53-18" name="__codelineno-53-18"></a><span class="s2">                file(&quot;${projectDir}/modules/local/gatk/jointgenotyping/tests/inputs/reads_son.bam.g.vcf&quot;)</span>
<a id="__codelineno-53-19" name="__codelineno-53-19"></a><span class="s2">            ]</span>
<a id="__codelineno-53-20" name="__codelineno-53-20"></a><span class="s2">            input[1] = [</span>
<a id="__codelineno-53-21" name="__codelineno-53-21"></a><span class="s2">                file(&quot;${projectDir}/modules/local/gatk/jointgenotyping/tests/inputs/reads_father.bam.g.vcf.idx&quot;),</span>
<a id="__codelineno-53-22" name="__codelineno-53-22"></a><span class="s2">                file(&quot;${projectDir}/modules/local/gatk/jointgenotyping/tests/inputs/reads_mother.bam.g.vcf.idx&quot;),</span>
<a id="__codelineno-53-23" name="__codelineno-53-23"></a><span class="s2">                file(&quot;${projectDir}/modules/local/gatk/jointgenotyping/tests/inputs/reads_son.bam.g.vcf.idx&quot;)</span>
<a id="__codelineno-53-24" name="__codelineno-53-24"></a><span class="s2">            ]</span>
<a id="__codelineno-53-25" name="__codelineno-53-25"></a><span class="s2">            input[2] = file(&quot;${projectDir}/data/ref/intervals.bed&quot;)</span>
<a id="__codelineno-53-26" name="__codelineno-53-26"></a><span class="s2">            input[3] = &quot;family_trio&quot;</span>
<a id="__codelineno-53-27" name="__codelineno-53-27"></a><span class="s2">            input[4] = file(&quot;${projectDir}/data/ref/ref.fasta&quot;)</span>
<a id="__codelineno-53-28" name="__codelineno-53-28"></a><span class="s2">            input[5] = file(&quot;${projectDir}/data/ref/ref.fasta.fai&quot;)</span>
<a id="__codelineno-53-29" name="__codelineno-53-29"></a><span class="s2">            input[6] = file(&quot;${projectDir}/data/ref/ref.dict&quot;)</span>
<a id="__codelineno-53-30" name="__codelineno-53-30"></a><span class="s2">            &quot;&quot;&quot;</span>
<a id="__codelineno-53-31" name="__codelineno-53-31"></a><span class="w">        </span><span class="o">}</span>
<a id="__codelineno-53-32" name="__codelineno-53-32"></a><span class="w">    </span><span class="o">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="34-use-content-assertions">3.4. Use content assertions<a class="headerlink" href="#34-use-content-assertions" title="Permanent link">&para;</a></h3>
<p>The output of the joint genotyping step is another VCF file, so we're going to use a content assertion again.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">modules/local/gatk/jointgenotyping/tests/main.nf.test</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-54-25">25</a></span>
<span class="normal"><a href="#__codelineno-54-26">26</a></span>
<span class="normal"><a href="#__codelineno-54-27">27</a></span>
<span class="normal"><a href="#__codelineno-54-28">28</a></span>
<span class="normal"><a href="#__codelineno-54-29">29</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-54-25" name="__codelineno-54-25"></a><span class="n">then</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-54-26" name="__codelineno-54-26"></a><span class="w">    </span><span class="k">assert</span><span class="w"> </span><span class="n">process</span><span class="o">.</span><span class="na">success</span>
<a id="__codelineno-54-27" name="__codelineno-54-27"></a><span class="w">    </span><span class="k">assert</span><span class="w"> </span><span class="n">path</span><span class="o">(</span><span class="n">process</span><span class="o">.</span><span class="na">out</span><span class="o">[</span><span class="mi">0</span><span class="o">][</span><span class="mi">0</span><span class="o">]).</span><span class="na">readLines</span><span class="o">().</span><span class="na">contains</span><span class="o">(</span><span class="s1">&#39;#CHROM	POS	ID	REF	ALT	QUAL	FILTER	INFO	FORMAT	reads_father	reads_mother	reads_son&#39;</span><span class="o">)</span>
<a id="__codelineno-54-28" name="__codelineno-54-28"></a><span class="w">    </span><span class="k">assert</span><span class="w"> </span><span class="n">path</span><span class="o">(</span><span class="n">process</span><span class="o">.</span><span class="na">out</span><span class="o">[</span><span class="mi">0</span><span class="o">][</span><span class="mi">0</span><span class="o">]).</span><span class="na">readLines</span><span class="o">().</span><span class="na">contains</span><span class="o">(</span><span class="s1">&#39;20_10037292_10066351	3480	.	C	CT	1625.89	.	AC=5;AF=0.833;AN=6;BaseQRankSum=0.220;DP=85;ExcessHet=0.0000;FS=2.476;MLEAC=5;MLEAF=0.833;MQ=60.00;MQRankSum=0.00;QD=21.68;ReadPosRankSum=-1.147e+00;SOR=0.487	GT:AD:DP:GQ:PL	0/1:15,16:31:99:367,0,375	1/1:0,18:18:54:517,54,0	1/1:0,26:26:78:756,78,0&#39;</span><span class="o">)</span>
<a id="__codelineno-54-29" name="__codelineno-54-29"></a><span class="o">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="35-run-the-test">3.5. Run the test<a class="headerlink" href="#35-run-the-test" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-55-1" name="__codelineno-55-1" href="#__codelineno-55-1"></a>nf-test<span class="w"> </span><span class="nb">test</span><span class="w"> </span>--profile<span class="w"> </span>docker_on<span class="w"> </span>modules/local/gatk/jointgenotyping/tests/main.nf.test
</code></pre></div>
<p>Produces:</p>
<div class="highlight"><span class="filename">Output</span><pre><span></span><code><a id="__codelineno-56-1" name="__codelineno-56-1" href="#__codelineno-56-1"></a><span class="go">ð nf-test 0.9.1</span>
<a id="__codelineno-56-2" name="__codelineno-56-2" href="#__codelineno-56-2"></a><span class="go">https://www.nf-test.com</span>
<a id="__codelineno-56-3" name="__codelineno-56-3" href="#__codelineno-56-3"></a><span class="gp gp-VirtualEnv">(c)</span> <span class="go">2021 - 2024 Lukas Forer and Sebastian Schoenherr</span>
<a id="__codelineno-56-4" name="__codelineno-56-4" href="#__codelineno-56-4"></a>
<a id="__codelineno-56-5" name="__codelineno-56-5" href="#__codelineno-56-5"></a>
<a id="__codelineno-56-6" name="__codelineno-56-6" href="#__codelineno-56-6"></a><span class="go">Test Process GATK_JOINTGENOTYPING</span>
<a id="__codelineno-56-7" name="__codelineno-56-7" href="#__codelineno-56-7"></a>
<a id="__codelineno-56-8" name="__codelineno-56-8" href="#__codelineno-56-8"></a><span class="go">  Test [24c3cb4b] &#39;family_trio [vcf] [idx]&#39; PASSED (14.881s)</span>
<a id="__codelineno-56-9" name="__codelineno-56-9" href="#__codelineno-56-9"></a>
<a id="__codelineno-56-10" name="__codelineno-56-10" href="#__codelineno-56-10"></a>
<a id="__codelineno-56-11" name="__codelineno-56-11" href="#__codelineno-56-11"></a><span class="go">SUCCESS: Executed 1 tests in 14.885s</span>
</code></pre></div>
<p>It works! And that's it for module-level tests for our pipeline.</p>
<h3 id="takeaway_3">Takeaway<a class="headerlink" href="#takeaway_3" title="Permanent link">&para;</a></h3>
<p>You know how to write tests for using inputs that have been previously generated and are co-located with the module code.</p>
<h3 id="whats-next_3">What's next?<a class="headerlink" href="#whats-next_3" title="Permanent link">&para;</a></h3>
<p>Learn how to write a workflow-level test.</p>
<hr />
<h2 id="4-add-a-workflow-level-test">4. Add a workflow-level test<a class="headerlink" href="#4-add-a-workflow-level-test" title="Permanent link">&para;</a></h2>
<p>Now all that remains is to add a test for checking that the whole pipeline runs to completion.</p>
<h3 id="41-generate-pipeline-level-stub-test-file">4.1. Generate pipeline-level stub test file<a class="headerlink" href="#41-generate-pipeline-level-stub-test-file" title="Permanent link">&para;</a></h3>
<p>The command is similar to the one for module tests, except it says <code>generate pipeline</code> instead of <code>generate process</code>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-57-1" name="__codelineno-57-1" href="#__codelineno-57-1"></a>nf-test<span class="w"> </span>generate<span class="w"> </span>pipeline<span class="w"> </span>main.nf
</code></pre></div>
<p>It produces a similar stub file:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">tests/main.nf.test</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-58-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-58-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-58-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-58-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-58-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-58-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-58-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-58-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-58-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-58-10">10</a></span>
<span class="normal"><a href="#__codelineno-58-11">11</a></span>
<span class="normal"><a href="#__codelineno-58-12">12</a></span>
<span class="normal"><a href="#__codelineno-58-13">13</a></span>
<span class="normal"><a href="#__codelineno-58-14">14</a></span>
<span class="normal"><a href="#__codelineno-58-15">15</a></span>
<span class="normal"><a href="#__codelineno-58-16">16</a></span>
<span class="normal"><a href="#__codelineno-58-17">17</a></span>
<span class="normal"><a href="#__codelineno-58-18">18</a></span>
<span class="normal"><a href="#__codelineno-58-19">19</a></span>
<span class="normal"><a href="#__codelineno-58-20">20</a></span>
<span class="normal"><a href="#__codelineno-58-21">21</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-58-1" name="__codelineno-58-1"></a><span class="n">nextflow_pipeline</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-58-2" name="__codelineno-58-2"></a>
<a id="__codelineno-58-3" name="__codelineno-58-3"></a><span class="w">    </span><span class="n">name</span><span class="w"> </span><span class="s2">&quot;Test Workflow main.nf&quot;</span>
<a id="__codelineno-58-4" name="__codelineno-58-4"></a><span class="w">    </span><span class="n">script</span><span class="w"> </span><span class="s2">&quot;main.nf&quot;</span>
<a id="__codelineno-58-5" name="__codelineno-58-5"></a>
<a id="__codelineno-58-6" name="__codelineno-58-6"></a><span class="w">    </span><span class="n">test</span><span class="o">(</span><span class="s2">&quot;Should run without failures&quot;</span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-58-7" name="__codelineno-58-7"></a>
<a id="__codelineno-58-8" name="__codelineno-58-8"></a><span class="w">        </span><span class="n">when</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-58-9" name="__codelineno-58-9"></a><span class="w">            </span><span class="n">params</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-58-10" name="__codelineno-58-10"></a><span class="w">                </span><span class="c1">// define parameters here. Example:</span>
<a id="__codelineno-58-11" name="__codelineno-58-11"></a><span class="w">                </span><span class="c1">// outdir = &quot;tests/results&quot;</span>
<a id="__codelineno-58-12" name="__codelineno-58-12"></a><span class="w">            </span><span class="o">}</span>
<a id="__codelineno-58-13" name="__codelineno-58-13"></a><span class="w">        </span><span class="o">}</span>
<a id="__codelineno-58-14" name="__codelineno-58-14"></a>
<a id="__codelineno-58-15" name="__codelineno-58-15"></a><span class="w">        </span><span class="n">then</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-58-16" name="__codelineno-58-16"></a><span class="w">            </span><span class="k">assert</span><span class="w"> </span><span class="n">workflow</span><span class="o">.</span><span class="na">success</span>
<a id="__codelineno-58-17" name="__codelineno-58-17"></a><span class="w">        </span><span class="o">}</span>
<a id="__codelineno-58-18" name="__codelineno-58-18"></a>
<a id="__codelineno-58-19" name="__codelineno-58-19"></a><span class="w">    </span><span class="o">}</span>
<a id="__codelineno-58-20" name="__codelineno-58-20"></a>
<a id="__codelineno-58-21" name="__codelineno-58-21"></a><span class="o">}</span>
</code></pre></div></td></tr></table></div>
<p>The line <code>assert workflow.success</code> is a simple assertion testing for whether the pipeline ran successfully.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In this case the test file can stay where <code>nf-test</code> created it.</p>
</div>
<h3 id="42-specify-input-parameters">4.2. Specify input parameters<a class="headerlink" href="#42-specify-input-parameters" title="Permanent link">&para;</a></h3>
<p>We still need to specify inputs.
There are several ways of doing this, including by specifying a profile.
However, a simpler way is to set up a <code>params {}</code> block in the <code>nextflow.config</code> file that <code>nf-test init</code> originally created in the <code>tests</code> directory.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">tests/nextflow.config</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-59-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-59-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-59-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-59-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-59-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-59-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-59-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-59-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-59-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-59-10">10</a></span>
<span class="normal"><a href="#__codelineno-59-11">11</a></span>
<span class="normal"><a href="#__codelineno-59-12">12</a></span>
<span class="normal"><a href="#__codelineno-59-13">13</a></span>
<span class="normal"><a href="#__codelineno-59-14">14</a></span>
<span class="normal"><a href="#__codelineno-59-15">15</a></span>
<span class="normal"><a href="#__codelineno-59-16">16</a></span>
<span class="normal"><a href="#__codelineno-59-17">17</a></span>
<span class="normal"><a href="#__codelineno-59-18">18</a></span>
<span class="normal"><a href="#__codelineno-59-19">19</a></span>
<span class="normal"><a href="#__codelineno-59-20">20</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-59-1" name="__codelineno-59-1"></a><span class="cm">/*</span>
<a id="__codelineno-59-2" name="__codelineno-59-2"></a><span class="cm"> * Pipeline parameters</span>
<a id="__codelineno-59-3" name="__codelineno-59-3"></a><span class="cm"> */</span>
<a id="__codelineno-59-4" name="__codelineno-59-4"></a>
<a id="__codelineno-59-5" name="__codelineno-59-5"></a><span class="n">params</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-59-6" name="__codelineno-59-6"></a><span class="w">    </span><span class="c1">// Primary input (file of input files, one per line)</span>
<a id="__codelineno-59-7" name="__codelineno-59-7"></a><span class="w">    </span><span class="n">reads_bam</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;${projectDir}/data/sample_bams.txt&quot;</span>
<a id="__codelineno-59-8" name="__codelineno-59-8"></a>
<a id="__codelineno-59-9" name="__codelineno-59-9"></a><span class="w">    </span><span class="c1">// Output directory</span>
<a id="__codelineno-59-10" name="__codelineno-59-10"></a><span class="w">    </span><span class="n">params</span><span class="o">.</span><span class="na">outdir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;results_genomics&quot;</span>
<a id="__codelineno-59-11" name="__codelineno-59-11"></a>
<a id="__codelineno-59-12" name="__codelineno-59-12"></a><span class="w">    </span><span class="c1">// Accessory files</span>
<a id="__codelineno-59-13" name="__codelineno-59-13"></a><span class="w">    </span><span class="n">reference</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;${projectDir}/data/ref/ref.fasta&quot;</span>
<a id="__codelineno-59-14" name="__codelineno-59-14"></a><span class="w">    </span><span class="n">reference_index</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;${projectDir}/data/ref/ref.fasta.fai&quot;</span>
<a id="__codelineno-59-15" name="__codelineno-59-15"></a><span class="w">    </span><span class="n">reference_dict</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;${projectDir}/data/ref/ref.dict&quot;</span>
<a id="__codelineno-59-16" name="__codelineno-59-16"></a><span class="w">    </span><span class="n">intervals</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;${projectDir}/data/ref/intervals.bed&quot;</span>
<a id="__codelineno-59-17" name="__codelineno-59-17"></a>
<a id="__codelineno-59-18" name="__codelineno-59-18"></a><span class="w">    </span><span class="c1">// Base name for final output file</span>
<a id="__codelineno-59-19" name="__codelineno-59-19"></a><span class="w">    </span><span class="n">cohort_name</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;family_trio&quot;</span>
<a id="__codelineno-59-20" name="__codelineno-59-20"></a><span class="o">}</span>
</code></pre></div></td></tr></table></div>
<p>When we run the test, <code>nf-test</code> will pick up this configuration file and pull in the inputs accordingly.</p>
<h3 id="43-run-the-test">4.3. Run the test<a class="headerlink" href="#43-run-the-test" title="Permanent link">&para;</a></h3>
<p>Here we go!</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-60-1" name="__codelineno-60-1" href="#__codelineno-60-1"></a>nf-test<span class="w"> </span><span class="nb">test</span><span class="w"> </span>--profile<span class="w"> </span>docker_on<span class="w"> </span>tests/main.nf.test
</code></pre></div>
<p>This produces:</p>
<div class="highlight"><span class="filename">Output</span><pre><span></span><code><a id="__codelineno-61-1" name="__codelineno-61-1" href="#__codelineno-61-1"></a><span class="go">ð nf-test 0.9.1</span>
<a id="__codelineno-61-2" name="__codelineno-61-2" href="#__codelineno-61-2"></a><span class="go">https://www.nf-test.com</span>
<a id="__codelineno-61-3" name="__codelineno-61-3" href="#__codelineno-61-3"></a><span class="gp gp-VirtualEnv">(c)</span> <span class="go">2021 - 2024 Lukas Forer and Sebastian Schoenherr</span>
<a id="__codelineno-61-4" name="__codelineno-61-4" href="#__codelineno-61-4"></a>
<a id="__codelineno-61-5" name="__codelineno-61-5" href="#__codelineno-61-5"></a>
<a id="__codelineno-61-6" name="__codelineno-61-6" href="#__codelineno-61-6"></a><span class="go">Test Workflow hello-nf-test.nf</span>
<a id="__codelineno-61-7" name="__codelineno-61-7" href="#__codelineno-61-7"></a>
<a id="__codelineno-61-8" name="__codelineno-61-8" href="#__codelineno-61-8"></a><span class="go">  Test [df3a3a8c] &#39;Should run without failures&#39; PASSED (62.493s)</span>
<a id="__codelineno-61-9" name="__codelineno-61-9" href="#__codelineno-61-9"></a>
<a id="__codelineno-61-10" name="__codelineno-61-10" href="#__codelineno-61-10"></a>
<a id="__codelineno-61-11" name="__codelineno-61-11" href="#__codelineno-61-11"></a><span class="go">SUCCESS: Executed 1 tests in 62.498s</span>
</code></pre></div>
<p>That's it! If necessary, more nuanced assertions can be added to test for the validity and content of the pipeline outputs.
You can learn more about the different kinds of assertions you can use in the <a href="https://www.nf-test.com/docs/assertions/assertions/">nf-test documentation</a>.</p>
<h3 id="43-run-all-the-tests">4.3. Run ALL the tests!<a class="headerlink" href="#43-run-all-the-tests" title="Permanent link">&para;</a></h3>
<p>nf-test has one more trick up it's sleeve. We can run all the tests at once! Modify the <code>nf-test.config</code> file so that nf-test looks in every directory for nf-test files. You can do this by modifying the <code>testsDir</code> parameter:</p>
<p><em>Before:</em></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">tests/nf-test.config</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-62-1">1</a></span>
<span class="normal"><a href="#__codelineno-62-2">2</a></span>
<span class="normal"><a href="#__codelineno-62-3">3</a></span>
<span class="normal"><a href="#__codelineno-62-4">4</a></span>
<span class="normal"><a href="#__codelineno-62-5">5</a></span>
<span class="normal"><a href="#__codelineno-62-6">6</a></span>
<span class="normal"><a href="#__codelineno-62-7">7</a></span>
<span class="normal"><a href="#__codelineno-62-8">8</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-62-1" name="__codelineno-62-1"></a><span class="n">config</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-62-2" name="__codelineno-62-2"></a>
<a id="__codelineno-62-3" name="__codelineno-62-3"></a><span class="w">    </span><span class="n">testsDir</span><span class="w"> </span><span class="s2">&quot;tests&quot;</span>
<a id="__codelineno-62-4" name="__codelineno-62-4"></a><span class="w">    </span><span class="n">workDir</span><span class="w"> </span><span class="s2">&quot;.nf-test&quot;</span>
<a id="__codelineno-62-5" name="__codelineno-62-5"></a><span class="w">    </span><span class="n">configFile</span><span class="w"> </span><span class="s2">&quot;tests/nextflow.config&quot;</span>
<a id="__codelineno-62-6" name="__codelineno-62-6"></a><span class="w">    </span><span class="n">profile</span><span class="w"> </span><span class="s2">&quot;&quot;</span>
<a id="__codelineno-62-7" name="__codelineno-62-7"></a>
<a id="__codelineno-62-8" name="__codelineno-62-8"></a><span class="o">}</span>
</code></pre></div></td></tr></table></div>
<p><em>After:</em></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">tests/nf-test.config</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-63-1">1</a></span>
<span class="normal"><a href="#__codelineno-63-2">2</a></span>
<span class="normal"><a href="#__codelineno-63-3">3</a></span>
<span class="normal"><a href="#__codelineno-63-4">4</a></span>
<span class="normal"><a href="#__codelineno-63-5">5</a></span>
<span class="normal"><a href="#__codelineno-63-6">6</a></span>
<span class="normal"><a href="#__codelineno-63-7">7</a></span>
<span class="normal"><a href="#__codelineno-63-8">8</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-63-1" name="__codelineno-63-1"></a><span class="n">config</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-63-2" name="__codelineno-63-2"></a>
<a id="__codelineno-63-3" name="__codelineno-63-3"></a><span class="w">    </span><span class="n">testsDir</span><span class="w"> </span><span class="s2">&quot;.&quot;</span>
<a id="__codelineno-63-4" name="__codelineno-63-4"></a><span class="w">    </span><span class="n">workDir</span><span class="w"> </span><span class="s2">&quot;.nf-test&quot;</span>
<a id="__codelineno-63-5" name="__codelineno-63-5"></a><span class="w">    </span><span class="n">configFile</span><span class="w"> </span><span class="s2">&quot;tests/nextflow.config&quot;</span>
<a id="__codelineno-63-6" name="__codelineno-63-6"></a><span class="w">    </span><span class="n">profile</span><span class="w"> </span><span class="s2">&quot;&quot;</span>
<a id="__codelineno-63-7" name="__codelineno-63-7"></a>
<a id="__codelineno-63-8" name="__codelineno-63-8"></a><span class="o">}</span>
</code></pre></div></td></tr></table></div>
<p>Now, we can simply run nf-test and it will run <em>every single test</em> in our repository:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-64-1" name="__codelineno-64-1" href="#__codelineno-64-1"></a>nf-test<span class="w"> </span><span class="nb">test</span><span class="w"> </span>--profile<span class="w"> </span>docker_on
</code></pre></div>
<div class="highlight"><span class="filename">Output</span><pre><span></span><code><a id="__codelineno-65-1" name="__codelineno-65-1" href="#__codelineno-65-1"></a><span class="go">gitpod /workspaces/hello-nextflow/hello-nf-test (master) $ nf-test test --profile docker_on</span>
<a id="__codelineno-65-2" name="__codelineno-65-2" href="#__codelineno-65-2"></a>
<a id="__codelineno-65-3" name="__codelineno-65-3" href="#__codelineno-65-3"></a><span class="go">ð nf-test 0.9.2</span>
<a id="__codelineno-65-4" name="__codelineno-65-4" href="#__codelineno-65-4"></a><span class="go">https://www.nf-test.com</span>
<a id="__codelineno-65-5" name="__codelineno-65-5" href="#__codelineno-65-5"></a><span class="gp gp-VirtualEnv">(c)</span> <span class="go">2021 - 2024 Lukas Forer and Sebastian Schoenherr</span>
<a id="__codelineno-65-6" name="__codelineno-65-6" href="#__codelineno-65-6"></a>
<a id="__codelineno-65-7" name="__codelineno-65-7" href="#__codelineno-65-7"></a>
<a id="__codelineno-65-8" name="__codelineno-65-8" href="#__codelineno-65-8"></a><span class="go">Test Process GATK_HAPLOTYPECALLER</span>
<a id="__codelineno-65-9" name="__codelineno-65-9" href="#__codelineno-65-9"></a>
<a id="__codelineno-65-10" name="__codelineno-65-10" href="#__codelineno-65-10"></a><span class="go">  Test [91903020] &#39;reads_son [bam]&#39; PASSED (9.392s)</span>
<a id="__codelineno-65-11" name="__codelineno-65-11" href="#__codelineno-65-11"></a><span class="go">  Test [6dd10adf] &#39;reads_mother [bam]&#39; PASSED (9.508s)</span>
<a id="__codelineno-65-12" name="__codelineno-65-12" href="#__codelineno-65-12"></a><span class="go">  Test [2d01c506] &#39;reads_father [bam]&#39; PASSED (9.209s)</span>
<a id="__codelineno-65-13" name="__codelineno-65-13" href="#__codelineno-65-13"></a>
<a id="__codelineno-65-14" name="__codelineno-65-14" href="#__codelineno-65-14"></a><span class="go">Test Process GATK_JOINTGENOTYPING</span>
<a id="__codelineno-65-15" name="__codelineno-65-15" href="#__codelineno-65-15"></a>
<a id="__codelineno-65-16" name="__codelineno-65-16" href="#__codelineno-65-16"></a><span class="go">  Test [fd98ae7b] &#39;family_trio [vcf] [idx]&#39; PASSED (10.537s)</span>
<a id="__codelineno-65-17" name="__codelineno-65-17" href="#__codelineno-65-17"></a>
<a id="__codelineno-65-18" name="__codelineno-65-18" href="#__codelineno-65-18"></a><span class="go">Test Process SAMTOOLS_INDEX</span>
<a id="__codelineno-65-19" name="__codelineno-65-19" href="#__codelineno-65-19"></a>
<a id="__codelineno-65-20" name="__codelineno-65-20" href="#__codelineno-65-20"></a><span class="go">  Test [e8dbf1c1] &#39;reads_son [bam]&#39; PASSED (4.504s)</span>
<a id="__codelineno-65-21" name="__codelineno-65-21" href="#__codelineno-65-21"></a><span class="go">  Test [5e05ca64] &#39;reads_mother [bam]&#39; PASSED (4.37s)</span>
<a id="__codelineno-65-22" name="__codelineno-65-22" href="#__codelineno-65-22"></a><span class="go">  Test [254f67ac] &#39;reads_father [bam]&#39; PASSED (4.717s)</span>
<a id="__codelineno-65-23" name="__codelineno-65-23" href="#__codelineno-65-23"></a>
<a id="__codelineno-65-24" name="__codelineno-65-24" href="#__codelineno-65-24"></a><span class="go">Test Workflow main.nf</span>
<a id="__codelineno-65-25" name="__codelineno-65-25" href="#__codelineno-65-25"></a>
<a id="__codelineno-65-26" name="__codelineno-65-26" href="#__codelineno-65-26"></a><span class="go">  Test [6fa6c90c] &#39;Should run without failures&#39; PASSED (23.872s)</span>
<a id="__codelineno-65-27" name="__codelineno-65-27" href="#__codelineno-65-27"></a>
<a id="__codelineno-65-28" name="__codelineno-65-28" href="#__codelineno-65-28"></a>
<a id="__codelineno-65-29" name="__codelineno-65-29" href="#__codelineno-65-29"></a><span class="go">SUCCESS: Executed 8 tests in 76.154s</span>
</code></pre></div>
<p>7 tests in 1 command! We spent a long time configuring lots and lots of tests, but when it came to running them it was very quick and easy. You can see how useful this is when maintaining a large pipeline, which could include hundreds of different elements. We spend time writing tests once so we can save time running them many times.</p>
<p>Furthermore, we can automate this! imagine tests running every time you or a colleague tries to add new code. This is how we ensure our pipelines maintain a high standard.</p>
<h3 id="takeaway_4">Takeaway<a class="headerlink" href="#takeaway_4" title="Permanent link">&para;</a></h3>
<p>You know how to write and run several kinds of tests for individual modules and for the entire workflow.</p>
<h3 id="whats-next_4">What's next?<a class="headerlink" href="#whats-next_4" title="Permanent link">&para;</a></h3>
<p>Celebrate and take a big break! Next up, we delve into the cornucopia of code and tools that is the nf-core project.</p>









  




                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Retour en haut de la page
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Pied de page" >
        
          
          <a href="../07_hello_modules/" class="md-footer__link md-footer__link--prev" aria-label="PrÃ©cÃ©dent: Part 6: Hello Modules">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                PrÃ©cÃ©dent
              </span>
              <div class="md-ellipsis">
                Part 6: Hello Modules
              </div>
            </div>
          </a>
        
        
          
          <a href="../09_hello_nf-core/" class="md-footer__link md-footer__link--next" aria-label="Suivant: Part 8: Hello nf-core">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Suivant
              </span>
              <div class="md-ellipsis">
                Part 8: Hello nf-core
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  <div>
    Copyright &copy; 2020-2023,
    <a href="https://seqera.io" target="_blank" rel="noopener">Seqera</a>.
  </div>
  <div class="footer_cc_link">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512">
      <!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.-->
      <path
        d="m245.83 214.87-33.22 17.28c-9.43-19.58-25.24-19.93-27.46-19.93-22.13 0-33.22 14.61-33.22 43.84 0 23.57 9.21 43.84 33.22 43.84 14.47 0 24.65-7.09 30.57-21.26l30.55 15.5c-6.17 11.51-25.69 38.98-65.1 38.98-22.6 0-73.96-10.32-73.96-77.05 0-58.69 43-77.06 72.63-77.06 30.72-.01 52.7 11.95 65.99 35.86zm143.05 0-32.78 17.28c-9.5-19.77-25.72-19.93-27.9-19.93-22.14 0-33.22 14.61-33.22 43.84 0 23.55 9.23 43.84 33.22 43.84 14.45 0 24.65-7.09 30.54-21.26l31 15.5c-2.1 3.75-21.39 38.98-65.09 38.98-22.69 0-73.96-9.87-73.96-77.05 0-58.67 42.97-77.06 72.63-77.06 30.71-.01 52.58 11.95 65.56 35.86zM247.56 8.05C104.74 8.05 0 123.11 0 256.05c0 138.49 113.6 248 247.56 248 129.93 0 248.44-100.87 248.44-248 0-137.87-106.62-248-248.44-248zm.87 450.81c-112.54 0-203.7-93.04-203.7-202.81 0-105.42 85.43-203.27 203.72-203.27 112.53 0 202.82 89.46 202.82 203.26-.01 121.69-99.68 202.82-202.84 202.82z"
      ></path>
    </svg>
    <a
      href="https://creativecommons.org/licenses/by-nc-nd/4.0/"
      target="_blank"
      rel="noopener"
      title="Creative Commons CC BY-NC-ND 4.0"
    >
      Creative Commons BY-NC-ND 4.0</a
    >.
  </div>
   Made with
  <a
    href="https://squidfunk.github.io/mkdocs-material/"
    target="_blank"
    rel="noopener"
  >
    Material for MkDocs
  </a>
  
</div>
      
        <div class="md-social">
  <a
    href="https://seqera.io"
    target="_blank"
    rel="noopener"
    class="footer_seqera_logo"
  >
    <img src="/assets/img/seqera_logo_white.png" />
  </a>
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
      <div class="md-consent" data-md-component="consent" id="__consent" hidden>
        <div class="md-consent__overlay"></div>
        <aside class="md-consent__inner">
          <form class="md-consent__form md-grid md-typeset" name="consent">
            

  
    
  


  
    
  



  


<h4>Cookie consent</h4>
<p>We use cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of our documentation and whether users find what they're searching for. With your consent, you're helping us to make our documentation better.</p>
<input class="md-toggle" type="checkbox" id="__settings" >
<div class="md-consent__settings">
  <ul class="task-list">
    
      
      
        
        
      
      <li class="task-list-item">
        <label class="task-list-control">
          <input type="checkbox" name="analytics" checked>
          <span class="task-list-indicator"></span>
          Google Analytics
        </label>
      </li>
    
      
      
        
        
      
      <li class="task-list-item">
        <label class="task-list-control">
          <input type="checkbox" name="github" checked>
          <span class="task-list-indicator"></span>
          GitHub
        </label>
      </li>
    
  </ul>
</div>
<div class="md-consent__controls">
  
    
      <button class="md-button md-button--primary">Accepter</button>
    
    
    
  
    
    
    
      <label class="md-button" for="__settings">ParamÃ©trer vos choix</label>
    
  
</div>
          </form>
        </aside>
      </div>
      <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout((function(){document.querySelector("[data-md-component=consent]").hidden=!1}),250);var form=document.forms.consent;for(var action of["submit","reset"])form.addEventListener(action,(function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map((function(e){return[e,!0]})))),location.hash="",location.reload()}))</script>
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["content.action.edit", "content.code.annotate", "content.code.copy", "navigation.footer", "navigation.tabs", "navigation.top", "navigation.tracking", "search.share", "toc.follow"], "search": "../../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copi\u00e9 dans le presse-papier", "clipboard.copy": "Copier dans le presse-papier", "search.result.more.one": "1 de plus sur cette page", "search.result.more.other": "# de plus sur cette page", "search.result.none": "Aucun document trouv\u00e9", "search.result.one": "1 document trouv\u00e9", "search.result.other": "# documents trouv\u00e9s", "search.result.placeholder": "Taper pour d\u00e9marrer la recherche", "search.result.term.missing": "Non trouv\u00e9", "select.version": "S\u00e9lectionner la version"}, "version": {"alias": true, "provider": "mike"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.f1b6f286.min.js"></script>
      
    
  </body>
</html>